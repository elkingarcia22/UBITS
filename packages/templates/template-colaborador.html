<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBITS Proyecto - Template Colaborador</title>
    
    <!-- UBITS Base Styles -->
    <link rel="stylesheet" href="../tokens/dist/tokens.css" />
    <link rel="stylesheet" href="../typography/fonts.css" />
    <link rel="stylesheet" href="../typography/tokens-typography.css" />
    <!-- FontAwesome Pro -->
    <link rel="stylesheet" href="assets/fontawesome/css/all.min.css" />
    
    <!-- Navigation Components -->
    <link rel="stylesheet" href="../components/sidebar/src/styles/sidebar.css" />
    <link rel="stylesheet" href="../components/subnav/src/styles/subnav.css" />
    <link rel="stylesheet" href="../components/tabbar/src/styles/tabbar.css" />
    
    <!-- UBITS Component Styles -->
    <link rel="stylesheet" href="../components/status-tag/src/styles/status-tag.css" />
    <link rel="stylesheet" href="../components/avatar/src/styles/avatar.css" />
    <link rel="stylesheet" href="../components/drawer/src/styles/drawer.css" />
    <link rel="stylesheet" href="../components/modal/src/styles/modal.css" />
    <link rel="stylesheet" href="../components/scroll/src/styles/scroll.css" />
    <link rel="stylesheet" href="../components/progress/src/styles/progress.css" />
    <link rel="stylesheet" href="../components/file-upload/src/styles/file-upload.css" />
    <link rel="stylesheet" href="../components/button/src/styles/button.css" />
    <link rel="stylesheet" href="../components/badge/src/styles/badge.css" />
    <link rel="stylesheet" href="../components/alert/src/styles/alert.css" />
    <link rel="stylesheet" href="../components/toast/src/styles/toast.css" />
    <link rel="stylesheet" href="../components/list/src/styles/list.css" />
    <link rel="stylesheet" href="../components/input/src/styles/input.css" />
    <link rel="stylesheet" href="../components/card/src/styles/card.css" />
    <link rel="stylesheet" href="../components/data-table/src/styles/data-table.css" />
    <link rel="stylesheet" href="../components/pagination/src/styles/pagination.css" />
    <link rel="stylesheet" href="../components/checkbox/src/styles/checkbox.css" />
    <link rel="stylesheet" href="../components/toggle/src/styles/toggle.css" />
    <link rel="stylesheet" href="../components/radio-button/src/styles/radio-button.css" />
    <link rel="stylesheet" href="../components/selection-card/src/styles/selection-card.css" />
    <link rel="stylesheet" href="../components/empty-state/src/styles/empty-state.css" />
    <link rel="stylesheet" href="../components/tooltip/src/styles/tooltip.css" />
    <link rel="stylesheet" href="../components/spinner/src/styles/spinner.css" />
    <link rel="stylesheet" href="../components/calendar/src/styles/calendar.css" />
    <link rel="stylesheet" href="../components/tabs/src/styles/tabs.css" />
    <link rel="stylesheet" href="../components/segment-control/src/styles/segment-control.css" />
    <link rel="stylesheet" href="../components/breadcrumb/src/styles/breadcrumb.css" />
    <link rel="stylesheet" href="../components/stepper/src/styles/stepper.css" />
    <link rel="stylesheet" href="../components/participants-menu/src/styles/participants-menu.css" />
    <link rel="stylesheet" href="../components/metric-card/src/styles/metric-card.css" />
    <link rel="stylesheet" href="../components/header-section/src/styles/header-section.css" />
    
    <style>
        /* ========================================
           GLOBAL STYLES
           ======================================== */
        
        * {
            box-sizing: border-box;
        }

        body {
            background-color: var(--ubits-bg-2);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            overflow-y: auto;
            font-family: var(--font-sans, 'Noto Sans', sans-serif);
            scrollbar-width: thin;
            scrollbar-color: var(--ubits-fg-2-medium-static) var(--ubits-bg-5);
        }

        /* Scrollbar personalizado */
        ::-webkit-scrollbar {
            width: var(--ubits-spacing-sm, 8px);
        }

        ::-webkit-scrollbar-track {
            background: var(--ubits-bg-5);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--ubits-fg-2-medium-static);
            border-radius: var(--ubits-border-radius-xs, 4px);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--ubits-fg-2-high-static);
        }

        /* ========================================
           DASHBOARD CONTAINER
           ======================================== */
        
        .dashboard-container {
            display: flex;
            min-height: 100vh;
            width: 100%;
            overflow: visible;
            /* ‚ö†Ô∏è IMPORTANTE: NO usar justify-content: center aqu√≠ */
            /* El margin: auto en .main-content (‚â•1440px) se encarga del centrado */
        }

        /* ========================================
           TOOLTIP
           ======================================== */
        
        /* ‚ö†Ô∏è NOTA: Los estilos del tooltip del sidebar est√°n en el componente sidebar.css */
        /* No sobrescribir aqu√≠, usar los estilos del componente oficial */

        /* ========================================
           MAIN CONTENT
           ======================================== */
        
        .main-content {
            position: relative;
            flex: 1;
            margin: var(--ubits-spacing-lg, 16px) var(--ubits-spacing-2xl, 24px) 0 calc(var(--ubits-spacing-2xl, 24px) + 96px + 23px);
            width: calc(100% - calc(var(--ubits-spacing-2xl, 24px) + 96px + 23px) - var(--ubits-spacing-2xl, 24px));
            overflow: visible;
            max-height: none;
            display: flex;
            flex-direction: column;
            gap: var(--ubits-spacing-xl, 20px); /* Gap entre SubNav y Content Area */
            z-index: 5;
            box-sizing: border-box;
        }

        /* Centrado para pantallas grandes - EXACTAMENTE igual que el proyecto UBITS original */
        /* El proyecto UBITS original usa margin: auto sin cambiar flex */
        @media (min-width: 1440px) {
            .main-content {
                margin: var(--ubits-spacing-lg, 16px) auto 0 auto; /* ‚ö†Ô∏è margin auto centra el elemento */
                padding-left: calc(var(--ubits-spacing-2xl, 24px) + 96px + 23px); /* Espacio para sidebar (24px + 96px + 23px gap) */
                padding-right: var(--ubits-spacing-2xl, 24px);
                width: 1607px;
                max-width: 1607px;
                box-sizing: border-box;
                /* ‚ö†Ô∏è IMPORTANTE: Mantener flex: 1, igual que el proyecto UBITS original */
                /* NO cambiar a flex: none, el margin: auto funciona con flex: 1 */
            }
        }

        /* Ajustar gap en m√≥vil cuando no hay subnav - igual que el proyecto UBITS original */
        @media (max-width: 1023px) {
            /* ‚ö†Ô∏è CR√çTICO: Ocultar sidebar container, igual que el proyecto UBITS original */
            #sidebar-container {
                display: none !important;
            }
            
            .main-content {
                gap: var(--ubits-spacing-xl, 20px);
                margin: var(--ubits-spacing-lg, 16px) var(--ubits-spacing-md, 12px) 0 var(--ubits-spacing-md, 12px) !important;
                width: calc(100% - var(--ubits-spacing-2xl, 24px));
                padding-left: 0;
                padding-right: 0;
                max-width: 100%;
                padding-bottom: var(--ubits-spacing-6xl, 40px); /* Espacio para el TabBar, igual que el proyecto UBITS original */
            }
            
            .content-area {
                padding-bottom: var(--ubits-spacing-6xl, 40px); /* Espacio para el TabBar, igual que el proyecto UBITS original */
            }
            
            .main-content > *:first-child {
                margin-top: -20px;
            }
        }


        /* ========================================
           CONTENT AREA
           ======================================== */
        
        .content-area {
            background-color: transparent !important;
            border-radius: var(--ubits-border-radius-md, 12px);
            border: none !important;
            flex: 1;
            min-height: 0;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            overflow: visible;
            box-sizing: border-box;
            max-height: none;
            box-shadow: none !important;
            width: 100%;
            max-width: 100%;
            gap: 0;
        }

        /* ========================================
           HEADER SECTION CONTAINER
           ======================================== */
        
        #header-section-container {
            width: 100%;
            background: transparent;
            padding: 0;
            margin-top: 0;
            margin-bottom: 0;
            box-sizing: border-box;
        }

        /* Ajustes responsive para header-section-container */
        @media (max-width: 1023px) {
            #header-section-container {
                padding: 0;
                margin-top: 0;
            }
        }

        @media (max-width: 479px) {
            #header-section-container {
                margin-top: 0;
            }
        }

        .content-area.no-background {
            background-color: transparent !important;
            border: none !important;
            box-shadow: none !important;
            padding: 0 40px !important;
        }

        /* ========================================
           CONTENT SECTIONS (Sistema de Widgets)
           ======================================== */
        
        .content-sections {
            display: flex;
            flex-direction: column;
            gap: var(--ubits-spacing-lg, 16px);
            flex: 1;
            min-width: 0;
            width: 100%; /* Ocupar el 100% del ancho del content-area */
            max-width: 100%; /* No exceder el ancho del content-area */
            overflow: visible;
            max-height: none;
            box-sizing: border-box;
        }

        .content-sections > *:not(:last-child):not(.section-dual):not(.section-single):not(.section-triple):not(.section-quad) {
            margin-bottom: var(--ubits-spacing-lg, 16px);
        }

        .content-sections::after {
            content: '';
            height: 0px;
            flex-shrink: 0;
        }

        .content-sections > *:last-child {
            margin-bottom: 0;
        }

        /* ========================================
           SECTION TYPES
           ======================================== */
        
        /* Secciones de widgets - igual que el proyecto UBITS original */
        .section-single {
            display: flex;
            width: 100%;
            box-sizing: border-box;
        }

        .section-dual {
            display: flex;
            gap: var(--ubits-spacing-xl, 20px);
            width: 100%;
            box-sizing: border-box;
        }

        .section-triple {
            display: flex;
            gap: var(--ubits-spacing-xl, 20px);
            width: 100%;
            box-sizing: border-box;
        }

        .section-quad {
            display: flex;
            gap: var(--ubits-spacing-xl, 20px);
            width: 100%;
            box-sizing: border-box;
        }

        /* ========================================
           WIDGETS
           ======================================== */
        
        /* Widgets en secciones - igual que el proyecto UBITS original */
        .section-single > div,
        .section-dual > div,
        .section-triple > div,
        .section-quad > div {
            background-color: var(--ubits-bg-1);
            border: none;
            border-radius: var(--ubits-border-radius-sm, 8px);
            padding: var(--ubits-spacing-lg, 16px) !important; /* !important para sobrescribir el reset */
            width: 100%; /* Ocupar el 100% del ancho de la secci√≥n */
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            min-width: 0; /* Permitir que se reduzca si es necesario */
        }

        /* Distribuci√≥n de anchos - igual que el proyecto UBITS original */
        .section-single > div {
            flex: 1;
        }

        .section-dual > div {
            flex: 1;
        }

        .section-triple > div {
            flex: 1;
        }

        .section-quad > div {
            flex: 1;
        }

        /* ========================================
           RESPONSIVE
           ======================================== */
        
        @media (max-width: 1023px) {
            .content-sections {
                padding-bottom: 0;
            }
            
            .section-dual,
            .section-triple,
            .section-quad {
                flex-direction: column;
                gap: var(--ubits-spacing-lg, 16px);
            }
        }

        @media (max-width: 480px) {
            .section-single > div,
            .section-dual > div,
            .section-triple > div,
            .section-quad > div {
                padding: var(--ubits-spacing-md, 12px) !important;
            }
        }

        /* ========================================
           DARK MODE
           ======================================== */
        
        [data-theme="dark"] body {
            background-color: var(--ubits-bg-2) !important;
        }

        [data-theme="dark"] .dashboard-container {
            background-color: var(--ubits-bg-2) !important;
        }

        [data-theme="dark"] .content-area {
            background-color: transparent !important;
            border-color: transparent !important;
        }

        body[data-theme="dark"] {
            background-color: var(--ubits-bg-2) !important;
        }

        body[data-theme="dark"] .dashboard-container {
            background-color: var(--ubits-bg-2) !important;
        }

        body[data-theme="dark"] .content-area {
            background-color: transparent !important;
            border-color: transparent !important;
        }

        /* Transiciones suaves para dark mode */
        body {
            transition: background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        color 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        *[data-theme] {
            transition: background-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>
<body data-theme="light">
    <div class="dashboard-container">
        <div class="tooltip" id="tooltip"></div>
        
        <!-- Sidebar Container -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <!-- SubNav Container -->
            <div id="top-nav-container"></div>
            
            <!-- Content Area -->
            <div class="content-area">
                <!-- Content wrapper con secciones de widgets -->
                <div class="content-sections">
                    <!-- Secci√≥n contenido principal -->
                    <div class="section-single">
                        <div class="widget-contenido-principal">
                            <p class="ubits-body-md-regular">Contenido principal</p>
                            <br><br><br><br><br><br><br><br><br><br><br>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Tab Bar Container -->
    <div id="tab-bar-container"></div>

    <!-- System Loaders -->
    <script src="components-loader.js"></script>
    <script src="config/products.js"></script>
    <script src="config/theme-manager.js"></script>
    <script src="config/responsive-manager.js"></script>
    <script src="engine/template-loader.js"></script>
    <script src="engine/content-manager.js"></script>
    
    <!-- UBITS Components System -->
    <!-- Los componentes se cargan din√°micamente a trav√©s de components-loader.js -->
    
    <script>
        // ========================================
        // DIAGN√ìSTICO: Verificar carga de CSS
        // ========================================
        console.log('üîç [Template] Iniciando diagn√≥stico de estilos...');
        
        // Verificar que los CSS se hayan cargado
        function checkLoadedStylesheets() {
            console.log('üîç [CSS Check] Verificando hojas de estilo cargadas...');
            const stylesheets = Array.from(document.styleSheets);
            console.log(`üìä [CSS Check] Total de hojas de estilo encontradas: ${stylesheets.length}`);
            
            const expectedCSS = [
                'tokens.css',
                'fonts.css',
                'tokens-typography.css',
                'sidebar.css',
                'subnav.css',
                'tabbar.css',
                'button.css'
            ];
            
            expectedCSS.forEach(cssName => {
                const found = stylesheets.some(sheet => {
                    try {
                        return sheet.href && sheet.href.includes(cssName);
                    } catch (e) {
                        return false;
                    }
                });
                console.log(found ? `‚úÖ [CSS Check] ${cssName} encontrado` : `‚ùå [CSS Check] ${cssName} NO encontrado`);
            });
            
            // Verificar tokens CSS espec√≠ficamente
            const tokensSheet = stylesheets.find(sheet => {
                try {
                    return sheet.href && sheet.href.includes('tokens.css');
                } catch (e) {
                    return false;
                }
            });
            
            if (tokensSheet) {
                console.log('‚úÖ [CSS Check] tokens.css encontrado:', tokensSheet.href);
                try {
                    const rules = Array.from(tokensSheet.cssRules || []);
                    console.log(`üìä [CSS Check] Reglas en tokens.css: ${rules.length}`);
                    if (rules.length > 0) {
                        const firstRule = rules[0];
                        console.log('üìã [CSS Check] Primera regla:', firstRule.cssText.substring(0, 100));
                    }
                } catch (e) {
                    console.error('‚ùå [CSS Check] Error al leer reglas de tokens.css:', e.message);
                }
            } else {
                console.error('‚ùå [CSS Check] tokens.css NO encontrado en document.styleSheets');
            }
        }
        
        // Verificar que los componentes existan en window
        function checkComponentsAvailable() {
            console.log('üîç [Template] Verificando componentes disponibles...');
            console.log('üì¶ [Template] window.createSidebar:', typeof window.createSidebar);
            console.log('üì¶ [Template] window.createSubNav:', typeof window.createSubNav);
            console.log('üì¶ [Template] window.createTabBar:', typeof window.createTabBar);
            console.log('üì¶ [Template] window.UBITS_ThemeManager:', typeof window.UBITS_ThemeManager);
            console.log('üì¶ [Template] window.UBITS_ResponsiveManager:', typeof window.UBITS_ResponsiveManager);
            console.log('üì¶ [Template] window.UBITS_TemplateLoader:', typeof window.UBITS_TemplateLoader);
        }
        
        // Verificar elementos renderizados y sus clases CSS
        function checkRenderedComponents() {
            setTimeout(() => {
                console.log('üîç [Template] Verificando componentes renderizados...');
                
                const sidebar = document.querySelector('.ubits-sidebar');
                if (sidebar) {
                    const computedStyle = window.getComputedStyle(sidebar);
                    console.log('‚úÖ [Template] Sidebar encontrado');
                    console.log('   - Clases:', sidebar.className);
                    console.log('   - Background:', computedStyle.backgroundColor);
                    console.log('   - Width:', computedStyle.width);
                    console.log('   - Height:', computedStyle.height);
                    console.log('   - Position:', computedStyle.position);
                } else {
                    console.log('‚ùå [Template] Sidebar NO encontrado');
                }
                
                const subnav = document.querySelector('.ubits-sub-nav');
                if (subnav) {
                    const computedStyle = window.getComputedStyle(subnav);
                    console.log('‚úÖ [Template] SubNav encontrado');
                    console.log('   - Clases:', subnav.className);
                    console.log('   - Background:', computedStyle.backgroundColor);
                    console.log('   - Height:', computedStyle.height);
                } else {
                    console.log('‚ùå [Template] SubNav NO encontrado');
                }
                
                const tabbar = document.querySelector('.ubits-tabbar');
                if (tabbar) {
                    const computedStyle = window.getComputedStyle(tabbar);
                    console.log('‚úÖ [Template] TabBar encontrado');
                    console.log('   - Clases:', tabbar.className);
                    console.log('   - Display:', computedStyle.display);
                    console.log('   - Background:', computedStyle.backgroundColor);
                } else {
                    console.log('‚ùå [Template] TabBar NO encontrado');
                }
                
                const buttons = document.querySelectorAll('.ubits-sidebar-nav-button');
                console.log(`üìä [Template] Botones del sidebar encontrados: ${buttons.length}`);
                if (buttons.length > 0) {
                    const firstButton = buttons[0];
                    const computedStyle = window.getComputedStyle(firstButton);
                    console.log('   - Clases del primer bot√≥n:', firstButton.className);
                    console.log('   - Width:', computedStyle.width);
                    console.log('   - Height:', computedStyle.height);
                    console.log('   - Background:', computedStyle.backgroundColor);
                    console.log('   - Color:', computedStyle.color);
                }
            }, 1000);
        }
        
        // ========================================
        // INITIALIZATION
        // Usando los componentes reales desde components-loader.js
        // ========================================
        
        // ========================================
        // HELPER FUNCTIONS (Compatibilidad)
        // ========================================
        
        function toggleDarkMode() {
            if (window.UBITS_ThemeManager) {
                window.UBITS_ThemeManager.toggleTheme();
            } else {
                // Fallback si ThemeManager no est√° disponible
                const body = document.body;
                const currentTheme = body.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                body.setAttribute('data-theme', newTheme);
                localStorage.setItem('ubits-theme', newTheme);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Verificar CSS inmediatamente
            setTimeout(checkLoadedStylesheets, 100);
            console.log('üöÄ [Template] DOMContentLoaded ejecutado');
            
            // Verificar CSS inmediatamente
            setTimeout(() => {
                console.log('üîç [Template] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                console.log('üîç [Template] VERIFICACI√ìN DE CSS CARGADOS');
                console.log('üîç [Template] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                checkLoadedStylesheets();
                console.log('üîç [Template] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            }, 50);
            
            // Verificar componentes disponibles
            setTimeout(() => {
                console.log('üîç [Template] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                console.log('üîç [Template] VERIFICACI√ìN DE COMPONENTES DISPONIBLES');
                console.log('üîç [Template] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
                checkComponentsAvailable();
                console.log('üîç [Template] ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
            }, 100);
            
            // Esperar a que todos los sistemas est√©n listos
            setTimeout(() => {
                // Verificar que todos los sistemas est√©n cargados
                if (!window.UBITS_ThemeManager || !window.UBITS_ResponsiveManager || !window.UBITS_TemplateLoader) {
                    return;
                }
                
                // Detectar producto actual
                const productId = window.detectCurrentProduct();
                console.log('üîç [Init] ProductId detectado:', productId);
                
                // Obtener configuraci√≥n del producto
                const productConfig = window.getProductConfig(productId);
                console.log('üîç [Init] ProductConfig obtenido:', productConfig);
                console.log('üîç [Init] ¬øTiene sidebar?', !!productConfig.sidebar);
                console.log('üîç [Init] ¬øTiene tabbar?', !!productConfig.tabbar);
                
                // Cargar tema guardado
                console.log('üîç [Init] Inicializando ThemeManager...');
                window.UBITS_ThemeManager.init();
                
                // ‚ö†Ô∏è IMPORTANTE: Cargar componentes PRIMERO
                // Luego inicializar responsive para que adapte los componentes ya creados
                console.log('üîç [Init] Cargando componentes con TemplateLoader...');
                console.log('üîç [Init] Contenedores:', {
                    sidebar: 'sidebar-container',
                    subnav: 'top-nav-container',
                    tabbar: 'tab-bar-container'
                });
                
                window.UBITS_TemplateLoader.loadProduct(productConfig, {
                    sidebar: 'sidebar-container',
                    subnav: 'top-nav-container',
                    tabbar: 'tab-bar-container'
                });
                
                console.log('‚úÖ [Init] TemplateLoader.loadProduct ejecutado');
                
                // Verificar que los componentes se hayan creado
                setTimeout(() => {
                    const sidebarContainer = document.getElementById('sidebar-container');
                    const subnavContainer = document.getElementById('top-nav-container');
                    const tabbarContainer = document.getElementById('tab-bar-container');
                    
                    console.log('üîç [Init] Verificando contenedores despu√©s de loadProduct...');
                    console.log('   - sidebar-container:', sidebarContainer ? '‚úÖ Encontrado' : '‚ùå NO encontrado');
                    if (sidebarContainer) {
                        console.log('   - sidebar-container.innerHTML length:', sidebarContainer.innerHTML.length);
                        console.log('   - sidebar-container tiene .ubits-sidebar:', !!sidebarContainer.querySelector('.ubits-sidebar'));
                    }
                    
                    console.log('   - top-nav-container:', subnavContainer ? '‚úÖ Encontrado' : '‚ùå NO encontrado');
                    if (subnavContainer) {
                        console.log('   - top-nav-container.innerHTML length:', subnavContainer.innerHTML.length);
                        console.log('   - top-nav-container tiene .ubits-sub-nav:', !!subnavContainer.querySelector('.ubits-sub-nav'));
                    }
                    
                    console.log('   - tab-bar-container:', tabbarContainer ? '‚úÖ Encontrado' : '‚ùå NO encontrado');
                    if (tabbarContainer) {
                        console.log('   - tab-bar-container.innerHTML length:', tabbarContainer.innerHTML.length);
                        console.log('   - tab-bar-container tiene .ubits-tabbar:', !!tabbarContainer.querySelector('.ubits-tabbar'));
                    }
                }, 200);
                
                // Inicializar responsive DESPU√âS de que los componentes se hayan cargado
                // Esto asegura que adaptComponents() encuentre los componentes
                setTimeout(() => {
                    console.log('üîç [Init] Inicializando ResponsiveManager...');
                    window.UBITS_ResponsiveManager.init();
                    // Ejecutar adaptComponents manualmente despu√©s de que los componentes est√©n listos
                    window.UBITS_ResponsiveManager.adaptComponents();
                    console.log('‚úÖ [Init] ResponsiveManager inicializado');
                    
                    // Verificar componentes renderizados despu√©s de responsive
                    checkRenderedComponents();
                }, 100);
                
        // Cargar secci√≥n inicial despu√©s de que todo est√© listo
        // IMPORTANTE: El SubNav NO se carga aqu√≠ porque ContentManager lo maneja
        // ‚ö†Ô∏è NOTA: El bot√≥n ya se activa autom√°ticamente con initialActiveSection en products.js
        // Solo necesitamos cargar el contenido inicial
        if (window.UBITS_ContentManager) {
            // Usar requestAnimationFrame para asegurar que el DOM est√© listo
            requestAnimationFrame(() => {
                setTimeout(() => {
                    // ‚ö†Ô∏è IMPORTANTE: Para sidebar "colaborador", la secci√≥n inicial es "aprendizaje"
                    const initialSection = productConfig.sidebar.initialActiveSection || 'aprendizaje';
                    console.log('üîç [Template Colaborador] Secci√≥n inicial:', initialSection);
                    console.log('üîç [Template Colaborador] ContentManager disponible:', !!window.UBITS_ContentManager);
                    
                    // Verificar estado del contenedor antes de cambiar secci√≥n
                    const topNavContainerBefore = document.getElementById('top-nav-container');
                    if (topNavContainerBefore) {
                        console.log('üîç [Template Colaborador] top-nav-container ANTES de handleSectionChange:');
                        console.log('   - Display:', window.getComputedStyle(topNavContainerBefore).display);
                        console.log('   - InnerHTML length:', topNavContainerBefore.innerHTML.length);
                        console.log('   - Tiene .ubits-sub-nav:', !!topNavContainerBefore.querySelector('.ubits-sub-nav'));
                    }
                    
                    // El ContentManager actualizar√° el SubNav y el contenido autom√°ticamente
                    // El bot√≥n ya est√° activo gracias a initialActiveSection, no necesitamos activarlo de nuevo
                    window.UBITS_ContentManager.handleSectionChange(initialSection);
                    
                    // Verificar estado del contenedor DESPU√âS de cambiar secci√≥n
                    setTimeout(() => {
                        const topNavContainerAfter = document.getElementById('top-nav-container');
                        if (topNavContainerAfter) {
                            console.log('üîç [Template Colaborador] top-nav-container DESPU√âS de handleSectionChange:');
                            console.log('   - Display:', window.getComputedStyle(topNavContainerAfter).display);
                            console.log('   - InnerHTML length:', topNavContainerAfter.innerHTML.length);
                            console.log('   - Tiene .ubits-sub-nav:', !!topNavContainerAfter.querySelector('.ubits-sub-nav'));
                            
                            const subNavElement = topNavContainerAfter.querySelector('.ubits-sub-nav');
                            if (subNavElement) {
                                const computedStyle = window.getComputedStyle(subNavElement);
                                console.log('üîç [Template Colaborador] Estilos del SubNav:');
                                console.log('   - Background:', computedStyle.backgroundColor);
                                console.log('   - Height:', computedStyle.height);
                                console.log('   - Width:', computedStyle.width);
                                console.log('   - Display:', computedStyle.display);
                                console.log('   - BorderRadius:', computedStyle.borderRadius);
                                console.log('   - BoxShadow:', computedStyle.boxShadow);
                            } else {
                                console.error('‚ùå [Template Colaborador] .ubits-sub-nav NO encontrado despu√©s de handleSectionChange');
                            }
                        }
                    }, 200);
                    
                    // Asegurar que el tooltip est√© oculto y que ning√∫n bot√≥n tenga focus
                    const tooltipElement = document.getElementById('ubits-sidebar-tooltip');
                    if (tooltipElement) {
                        tooltipElement.classList.remove('show');
                    }
                    
                    // Asegurar que ning√∫n bot√≥n tenga focus (para evitar borde azul)
                    const sidebarElement = document.querySelector('.ubits-sidebar');
                    if (sidebarElement) {
                        const activeButton = sidebarElement.querySelector('.ubits-sidebar-nav-button.active');
                        if (activeButton) {
                            activeButton.blur(); // Remover focus si lo tiene
                        }
                    }
                    
                    
                    // ‚ö†Ô∏è LOGS ESPEC√çFICOS PARA DEBUG DEL LAYOUT
                    debugLayout();
                    
                    // Escuchar cambios de tama√±o de ventana para logs continuos
                    let resizeTimeout;
                    window.addEventListener('resize', () => {
                        clearTimeout(resizeTimeout);
                        resizeTimeout = setTimeout(() => {
                            debugLayout();
                        }, 300);
                    });
                }, 200); // Delay m√≠nimo solo para asegurar que el DOM est√© listo
            });
        }
        
        // ‚ö†Ô∏è FUNCI√ìN DE DEBUG ESPEC√çFICA PARA EL LAYOUT
        function debugLayout() {
            const windowWidth = window.innerWidth;
            const mainContent = document.querySelector('.main-content');
            const sidebar = document.querySelector('.ubits-sidebar');
            const tabBar = document.querySelector('.ubits-tabbar');
            
            if (!mainContent) return;
            
            const mainRect = mainContent.getBoundingClientRect();
            const computedStyle = window.getComputedStyle(mainContent);
            const sidebarRect = sidebar ? sidebar.getBoundingClientRect() : null;
            const tabBarVisible = tabBar && window.getComputedStyle(tabBar).display !== 'none';
            
            // ‚ö†Ô∏è CR√çTICO: Verificar si est√° centrado correctamente
            // NOTA: getComputedStyle devuelve valores calculados en px, no "auto"
            // Verificamos centrado comparando los espacios laterales (deben estar balanceados)
            const marginLeftPx = parseFloat(computedStyle.marginLeft) || 0;
            const marginRightPx = parseFloat(computedStyle.marginRight) || 0;
            // Calcular espacios laterales (una sola vez)
            const leftSpace = mainRect.left;
            const rightSpace = windowWidth - mainRect.right;
            const imbalance = Math.abs(leftSpace - rightSpace);
            const isVisuallyCentered = imbalance < 10; // Considerar centrado si el desbalance es menor a 10px
            const isWideScreen = windowWidth >= 1440;
            const shouldBeCentered = isWideScreen && (computedStyle.flex === 'none' || computedStyle.flex === '0 0 auto');
            if (isWideScreen) {
            }
            
            if (sidebarRect) {
                const sidebarStyle = window.getComputedStyle(sidebar);
            }
            
            if (tabBar) {
                const tabBarStyle = window.getComputedStyle(tabBar);
            }
            
            // Mostrar espacios laterales
            
            
        }
                
                
                // ‚ö†Ô∏è DEBUG: Verificar posiciones y anchos despu√©s de cargar todo
                setTimeout(() => {
                    debugLayout();
                }, 1000);
            }, 200);
        });
        
        // Funci√≥n de debug para verificar layout
        function debugLayout() {
            
            const sidebar = document.querySelector('.ubits-sidebar');
            const sidebarContainer = document.getElementById('sidebar-container');
            const mainContent = document.querySelector('.main-content');
            const topNavContainer = document.getElementById('top-nav-container');
            const contentArea = document.querySelector('.content-area');
            const contentSections = document.querySelector('.content-sections');
            
            if (sidebar) {
                const sidebarRect = sidebar.getBoundingClientRect();
                const sidebarStyles = window.getComputedStyle(sidebar);
            }
            
            if (sidebarContainer) {
                const containerRect = sidebarContainer.getBoundingClientRect();
                const containerStyles = window.getComputedStyle(sidebarContainer);
            }
            
            if (mainContent) {
                const mainRect = mainContent.getBoundingClientRect();
                const mainStyles = window.getComputedStyle(mainContent);
            }
            
            if (topNavContainer) {
                const navRect = topNavContainer.getBoundingClientRect();
                const navStyles = window.getComputedStyle(topNavContainer);
            }
            
            if (contentArea) {
                const areaRect = contentArea.getBoundingClientRect();
                const areaStyles = window.getComputedStyle(contentArea);
            }
            
            if (contentSections) {
                const sectionsRect = contentSections.getBoundingClientRect();
                const sectionsStyles = window.getComputedStyle(contentSections);
            }
            
            // Calcular gaps
            if (sidebar && mainContent) {
                const sidebarRight = sidebar.getBoundingClientRect().right;
                const mainLeft = mainContent.getBoundingClientRect().left;
                const gap = mainLeft - sidebarRight;
            }
            
            // Calcular espacios laterales
            if (mainContent) {
                const windowWidth = window.innerWidth;
                const mainRight = mainContent.getBoundingClientRect().right;
                const mainLeft = mainContent.getBoundingClientRect().left;
                const leftSpace = mainLeft;
                const rightSpace = windowWidth - mainRight;
                const diferencia = Math.abs(leftSpace - rightSpace);
                const balanceado = diferencia < 10;
                
                
                if (!balanceado) {
                    if (leftSpace > rightSpace) {
                    } else {
                    }
                }
            }
            
        }
    </script>
</body>
</html>
