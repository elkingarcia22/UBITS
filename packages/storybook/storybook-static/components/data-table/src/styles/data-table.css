/* ========================================
   DATA TABLE
   ======================================== */

/* ========================================
   DATA TABLE CONTAINER (wrapper para tabla + paginador)
   ======================================== */
.ubits-data-table__container {
  display: flex;
  flex-direction: column;
  width: 100%;
  gap: 0;
  padding: 0; /* Sin padding para que el header esté pegado al borde */
}

/* ========================================
   DATA TABLE ACTION BAR (barra de acciones debajo del header)
   ======================================== */
.ubits-data-table__action-bar {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: var(--ubits-spacing-sm) 0; /* 8px arriba y abajo, 0px en los lados */
  gap: var(--ubits-spacing-xs);
  flex-wrap: wrap;
  background-color: var(--modifiers-normal-color-light-bg-1);
}

/* ========================================
   DATA TABLE HEADER (título, contador, botones)
   ======================================== */
.ubits-data-table__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: var(--ubits-spacing-md);
  padding-bottom: var(--ubits-spacing-sm);
  padding-left: 0; /* Alinear con el borde izquierdo del contenedor */
  padding-right: 0; /* Alinear con el borde derecho del contenedor */
  background-color: var(--modifiers-normal-color-light-bg-1);
  gap: var(--ubits-spacing-md);
  flex-wrap: wrap;
}

.ubits-data-table__header-title {
  display: flex;
  align-items: center;
  gap: var(--ubits-spacing-sm, 12px);
  flex: 1;
  min-width: 0;
  padding-left: 0; /* Sin padding - pegado al borde izquierdo del contenedor azul */
}

.ubits-data-table__header-title-text {
  margin: 0;
  font-family: var(--font-family-noto-sans-font-family);
  font-size: var(--modifiers-normal-body-md-semibold-fontsize);
  font-weight: var(--weight-semibold);
  line-height: var(--modifiers-normal-body-md-semibold-lineheight);
  color: var(--modifiers-normal-color-light-fg-1-high);
}

.ubits-data-table__header-counter {
  margin: 0;
  font-family: var(--font-family-noto-sans-font-family);
  font-size: var(--modifiers-normal-body-sm-regular-fontsize);
  font-weight: var(--weight-regular);
  line-height: var(--modifiers-normal-body-sm-regular-lineheight);
  color: var(--modifiers-normal-color-light-fg-1-medium);
}

.ubits-data-table__header-actions {
  display: flex;
  align-items: center;
  gap: var(--ubits-spacing-xs);
  flex-shrink: 0;
  position: relative;
  /* Permitir que el SearchButton se expanda hacia la izquierda */
  flex-wrap: nowrap;
  padding-left: 0; /* Sin padding - pegado al borde izquierdo del contenedor azul */
  padding-right: var(--ubits-spacing-md); /* Mantener padding derecho para alineación con el borde derecho */
}

.ubits-data-table__header-primary-button,
.ubits-data-table__header-secondary-button {
  flex-shrink: 0;
}

.ubits-data-table__header-search-button {
  flex-shrink: 0;
  position: relative;
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
}

/* Cuando el SearchButton está activo, mantener posición relativa y expandir hacia la izquierda */
.ubits-data-table__header-search-button.ubits-search-button--active {
  position: relative;
  /* El input se expandirá hacia la izquierda desde su posición original */
  /* NO aplicar width fijo, dejar que el componente SearchButton maneje su propio ancho */
  /* Usar margin-left negativo para compensar el ancho extra y mantener solo 8px de gap */
  /* El cálculo debe basarse en el ancho real del componente cuando está activo */
  margin-left: calc((248px - 32px - var(--ubits-spacing-xs)) * -1);
  margin-right: 0;
  /* Asegurar que el wrapper mantenga su posición relativa */
  z-index: 1;
}

/* Remover el width inline que viene del componente SearchButton */
.ubits-data-table__header-search-button.ubits-search-button--active {
  width: auto !important;
}

/* El input-wrapper debe tener el ancho deseado */
.ubits-data-table__header-search-button.ubits-search-button--active .ubits-search-button__input-wrapper {
  width: 248px;
  min-width: 248px;
  max-width: 248px;
}

.ubits-data-table__header-filter-button,
.ubits-data-table__header-column-selector-button {
  flex-shrink: 0;
  position: relative;
}

/* Badge number dentro del botón de filtro - sobrescribir estilos del botón */
.ubits-data-table__header-filter-button .ubits-button__badge.ubits-badge--number {
  position: absolute !important;
  top: -2px !important;
  right: -2px !important;
  width: auto !important;
  min-width: 16px !important;
  height: 16px !important;
  padding: 2px 4px !important;
  border-radius: 8px !important;
  font-size: 10px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  z-index: 1 !important;
  color: var(--modifiers-normal-color-light-fg-bold) !important;
}

/* Dropdown de selección de columnas */
.ubits-data-table__column-selector-dropdown {
  position: fixed;
  z-index: 1000;
  background-color: var(--modifiers-normal-color-light-bg-1);
  border: 1px solid var(--modifiers-normal-color-light-border-1);
  border-radius: var(--ubits-border-radius-md);
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 200px;
  max-height: 400px;
  overflow-y: auto;
  padding: var(--ubits-spacing-sm);
}

/* Estilos para la lista dentro del dropdown de selección de columnas */
.ubits-data-table__column-selector-list {
  box-shadow: none;
  border-radius: 0;
}

.ubits-data-table__column-selector-list .ubits-list-item {
  padding: var(--ubits-spacing-xs) var(--ubits-spacing-sm);
}

.ubits-data-table__column-selector-checkbox {
  width: 100%;
}

/* Asegurar que los checkboxes dentro de los items de lista se vean bien */
.ubits-data-table__column-selector-list .ubits-list-item .ubits-checkbox {
  width: 100%;
}

/* Estilos para el contenedor de filtros en el drawer */
.ubits-data-table__filters-container {
  display: flex;
  flex-direction: column;
  gap: var(--ubits-spacing-lg);
  padding: var(--ubits-spacing-lg);
}

.ubits-data-table__filter-item {
  width: 100%;
}

/* Responsive: en pantallas pequeñas, el header se apila verticalmente */
@media (max-width: 768px) {
  .ubits-data-table__header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .ubits-data-table__header-title {
    width: 100%;
  }
  
  .ubits-data-table__header-actions {
    width: 100%;
    flex-wrap: wrap;
  }
}

/* Espaciado entre la tabla y el paginador */
/* NO aplicamos margin-bottom a la tabla para no afectar su padding interno */

/* ========================================
   PAGINATION WRAPPER
   ======================================== */
.ubits-data-table__pagination-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: var(--ubits-spacing-md) var(--ubits-spacing-md) var(--ubits-spacing-md) var(--ubits-spacing-md);
  padding-top: 0;
  margin-top: 16px; /* Espaciado desde la última fila de la tabla */
  width: 100%;
  box-sizing: border-box;
  /* Asegurar que esté fuera del contenedor scrollable */
  flex-shrink: 0;
}

.ubits-data-table__pagination {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Tabla principal - sin contenedor adicional */
.ubits-data-table {
    position: relative;
    width: 100%;
    background-color: var(--modifiers-normal-color-light-bg-1);
    box-sizing: border-box;
    padding: var(--ubits-spacing-md);
    overflow: visible !important; /* Cambiar a visible por defecto, se aplicará auto solo cuando sea necesario */
    max-height: none !important; /* Remover max-height por defecto - el scrollable-container maneja su propio max-height */
    border-collapse: collapse;
    border: none;
    font-family: var(--font-family-noto-sans-font-family);
}

.ubits-data-table__table {
    width: 100%;
    border-collapse: collapse;
    border: none;
    font-family: var(--font-family-noto-sans-font-family);
}

/* Cuando hay columnas fijadas, cambiar border-collapse a separate para que sticky funcione */
.ubits-data-table__table:has(.ubits-data-table__column-header--pinned),
.ubits-data-table__table:has(.ubits-data-table__cell--pinned) {
    border-collapse: separate !important;
    border-spacing: 0 !important;
}

/* Cuando hay scroll horizontal, la tabla debe usar max-content en lugar de 100% */
.ubits-data-table__scrollable-container--horizontal .ubits-data-table__table,
.ubits-data-table__scrollable-container--vertical.ubits-data-table__scrollable-container--horizontal .ubits-data-table__table {
    width: max-content !important;
    min-width: max-content !important;
    table-layout: auto !important; /* Permitir que las columnas determinen el ancho */
    display: table !important; /* Asegurar que es una tabla */
    border-collapse: separate !important; /* Necesario para que sticky funcione */
    border-spacing: 0 !important;
}

/* Asegurar que el contenedor no comprima la tabla */
.ubits-data-table__scrollable-container--horizontal {
    min-width: 0 !important; /* Permitir que se comprima hasta el max-width */
}

.ubits-data-table__scrollable-container--horizontal > .ubits-data-table__table {
    width: max-content !important;
    min-width: max-content !important; /* Usar el ancho real del contenido */
    /* Asegurar que la tabla no se comprima */
    flex-shrink: 0 !important;
}

/* Header */
.ubits-data-table__thead {
    background-color: var(--modifiers-normal-color-light-bg-1);
}

.ubits-data-table__header-row {
    border-bottom: 1px solid var(--modifiers-normal-color-light-border-1);
}

/* Columna de controles - Header */
.ubits-data-table__controls-column-header {
    padding: var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px) var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px);
    padding-left: var(--ubits-spacing-md, 16px);
    padding-right: 48px !important;
    text-align: center;
    background-color: var(--modifiers-normal-color-light-bg-1);
    width: auto;
    min-width: 80px;
    max-width: 80px;
    vertical-align: middle;
    display: table-cell;
    position: sticky;
    left: 60px;
    z-index: 21;
    box-sizing: border-box;
}

/* Columna de controles - Celdas */
.ubits-data-table__controls-column {
    padding: var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px) var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px);
    padding-left: var(--ubits-spacing-md, 16px);
    padding-right: 48px !important;
    text-align: center;
    background-color: var(--modifiers-normal-color-light-bg-1);
    width: auto;
    min-width: 80px;
    max-width: 80px;
    vertical-align: middle;
    position: sticky;
    left: 60px;
    z-index: 16;
    box-sizing: border-box;
    transition: background-color 0.2s ease;
}

/* Colapsar la columna cuando no hay contenido - NO aplicar al header vacío que se usa para alineación */
.ubits-data-table__controls-column:empty {
    display: none;
}

/* El header vacío debe mostrarse para mantener alineación */
.ubits-data-table__controls-column-header:empty {
    display: table-cell !important;
}

.ubits-data-table__controls-wrapper:empty {
    display: none;
}

/* Removido - ahora se maneja en la regla general del hover de la fila */

.ubits-data-table__controls-wrapper {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: var(--ubits-spacing-xs, 4px);
    width: 100%;
    min-width: 70px;
}

/* Si el wrapper está vacío o solo tiene espacios, colapsar */
.ubits-data-table__controls-wrapper:empty {
    display: none;
}

.ubits-data-table__controls-wrapper .ubits-data-table__row-drag-handle {
    margin: 0;
    flex-shrink: 0;
}

.ubits-data-table__controls-wrapper .ubits-data-table__row-expand {
    margin: 0;
    flex-shrink: 0;
}

/* Drag handle para filas */
/* Usa el mismo color que el botón terciario para mantener consistencia */
.ubits-data-table__row-drag-handle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    cursor: grab;
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg);
    padding: 8px;
    border-radius: var(--ubits-border-radius-sm);
    transition: background-color 0.2s ease, color 0.2s ease;
    user-select: none;
    flex-shrink: 0;
    box-sizing: border-box;
}

.ubits-data-table__row-drag-handle wa-icon,
.ubits-data-table__row-drag-handle i {
    font-size: 12px;
    display: inline-block;
    width: 12px;
    height: 12px;
}

.ubits-data-table__row-drag-handle:active {
    cursor: grabbing;
    background-color: var(--modifiers-normal-button-color-light-brand-tertiary-bg-pressed);
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg);
}

.ubits-data-table__row-drag-handle:hover {
    background-color: var(--modifiers-normal-button-color-light-brand-tertiary-bg-hover);
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg);
}

.ubits-data-table__row-drag-handle wa-icon,
.ubits-data-table__row-drag-handle i {
    font-size: 14px;
}

/* Botón de expandir */
/* Usa el mismo color que el botón terciario para mantener consistencia */
.ubits-data-table__row-expand {
    background: none !important;
    border: none !important;
    padding: 8px !important;
    cursor: pointer !important;
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 28px !important;
    height: 28px !important;
    min-width: 28px !important;
    min-height: 28px !important;
    border-radius: var(--ubits-border-radius-sm) !important;
    transition: background-color 0.2s ease, color 0.2s ease !important;
    visibility: visible !important;
    opacity: 1 !important;
    box-sizing: border-box !important;
}

.ubits-data-table__row-expand i {
    display: inline-block !important;
    visibility: visible !important;
    opacity: 1 !important;
    font-size: 12px !important;
    width: 12px !important;
    height: 12px !important;
}

.ubits-data-table__row-expand:hover {
    background-color: var(--modifiers-normal-button-color-light-brand-tertiary-bg-hover) !important;
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg) !important;
}

.ubits-data-table__row-expand:active {
    background-color: var(--modifiers-normal-button-color-light-brand-tertiary-bg-pressed) !important;
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg) !important;
}

/* Headers de columnas de datos */
.ubits-data-table__column-header {
    padding: var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px);
    padding-left: 0;
    text-align: left;
    background-color: var(--modifiers-normal-color-light-bg-1);
    font-weight: 600;
    font-size: var(--modifiers-normal-body-sm-regular-fontsize);
    color: var(--modifiers-normal-color-light-fg-1-high);
    /* NO aplicar position: relative aquí, se aplicará inline cuando esté fijada */
}

.ubits-data-table__column-header-content {
    display: flex;
    align-items: center;
    gap: var(--ubits-spacing-xs);
    padding-left: 0;
    /* position: relative removido - no debe interferir con position: sticky del header */
    width: 100%;
}

.ubits-data-table__column-title {
    font-family: var(--font-family-noto-sans-font-family);
    font-size: var(--modifiers-normal-body-sm-regular-fontsize);
    font-weight: 600;
    color: var(--modifiers-normal-color-light-fg-1-high);
    margin-left: 0;
    padding-left: 0;
    flex: 1;
}

/* Contenedor de acciones (botones de ordenar y menú) */
.ubits-data-table__column-actions {
    display: flex;
    align-items: center;
    gap: 4px;
    flex-shrink: 0;
}

/* Botón de menú (3 puntos) - igual que botón de ordenar */
.ubits-data-table__column-menu-button.ubits-button--xs.ubits-button--icon-only {
    padding: 8px !important;
    width: 28px !important;
    min-width: 28px !important;
    height: 28px !important;
    min-height: 28px !important;
    max-width: 28px !important;
    max-height: 28px !important;
    margin: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
    box-sizing: border-box !important;
}

/* Estilos antiguos del botón de ordenar eliminados - ahora usa la misma estructura que drag handle */

/* Drag handle para columnas - igual tamaño que botón xs icon-only (28px) */
/* Usa el mismo color que el botón terciario para mantener consistencia */
.ubits-data-table__column-drag-handle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    min-width: 28px;
    min-height: 28px;
    cursor: grab;
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg);
    padding: 0;
    margin: 0;
    border-radius: var(--ubits-border-radius-sm);
    transition: background-color 0.2s ease, color 0.2s ease;
    user-select: none;
    flex-shrink: 0;
    box-sizing: border-box;
    position: relative;
}

/* Botón de ordenar - usa los mismos estilos del drag handle, solo cambia el cursor */
/* Al tener ambas clases (column-drag-handle y column-sort), hereda todos los estilos del drag handle */
.ubits-data-table__column-drag-handle.ubits-data-table__column-sort {
    cursor: pointer !important; /* Cambiar cursor a pointer en lugar de grab */
    display: flex !important; /* Asegurar que sea visible */
    visibility: visible !important;
    opacity: 1 !important;
}

.ubits-data-table__column-drag-handle wa-icon,
.ubits-data-table__column-drag-handle i {
    font-size: 14px !important;
    display: block !important;
    width: 14px !important;
    height: 14px !important;
    color: inherit !important;
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1 !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    box-sizing: border-box !important;
    text-align: center !important;
    vertical-align: middle !important;
}

.ubits-data-table__column-drag-handle:active {
    cursor: grabbing;
    background-color: var(--modifiers-normal-button-color-light-brand-tertiary-bg-pressed);
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg);
}

.ubits-data-table__column-drag-handle:hover {
    background-color: var(--modifiers-normal-button-color-light-brand-tertiary-bg-hover);
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg);
}

/* Estado activo del botón de ordenar (cuando está ordenado) */
/* Solo cambia el fondo, el color del icono se mantiene igual */
.ubits-data-table__column-drag-handle.ubits-data-table__column-sort--active {
    background-color: var(--modifiers-normal-color-light-bg-active);
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg); /* Mantener el mismo color del icono */
}

.ubits-data-table__column-drag-handle.ubits-data-table__column-sort--active:hover {
    background-color: var(--modifiers-normal-color-light-bg-active);
    color: var(--modifiers-normal-button-color-light-brand-tertiary-fg); /* Mantener el mismo color del icono */
}

.ubits-data-table__column-drag-handle.ubits-data-table__column-sort--active wa-icon,
.ubits-data-table__column-drag-handle.ubits-data-table__column-sort--active i {
    color: inherit; /* Heredar el color del contenedor, que es var(--modifiers-normal-button-color-light-brand-tertiary-fg) */
}

/* Estados de drag */
.ubits-data-table__column-header--dragging {
    opacity: 0.5;
}

.ubits-data-table__column-header--drag-over {
    background: var(--modifiers-normal-color-light-bg-active), var(--modifiers-normal-color-light-bg-1) !important;
    border-left: 2px solid var(--modifiers-normal-color-light-accent-brand);
}

.ubits-data-table__row--dragging {
    opacity: 0.5;
}

.ubits-data-table__row--drag-over {
    background: var(--modifiers-normal-color-light-bg-active), var(--modifiers-normal-color-light-bg-1) !important;
    border-top: 2px solid var(--modifiers-normal-color-light-accent-brand);
}

/* Fallback para iconos */
/* El botón de ordenar ahora tiene ambas clases (column-drag-handle y column-sort), así que hereda los estilos del drag handle */
.ubits-data-table__column-drag-handle wa-icon,
.ubits-data-table__row-drag-handle wa-icon {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.ubits-data-table__column-drag-handle i,
.ubits-data-table__row-drag-handle i {
    display: none;
}

.ubits-data-table__column-drag-handle:not(:has(wa-icon:defined)) wa-icon,
.ubits-data-table__row-drag-handle:not(:has(wa-icon:defined)) wa-icon {
    display: none;
}

.ubits-data-table__column-drag-handle:not(:has(wa-icon:defined)) i,
.ubits-data-table__row-drag-handle:not(:has(wa-icon:defined)) i {
    display: inline-block;
}

/* Body */
.ubits-data-table__tbody {
    background-color: var(--modifiers-normal-color-light-bg-1);
}

.ubits-data-table__row {
    border-bottom: 1px solid var(--modifiers-normal-color-light-border-1);
    transition: background-color 0.2s ease;
    background-color: var(--modifiers-normal-color-light-bg-1);
}

.ubits-data-table__row:last-child {
    border-bottom: none;
}

.ubits-data-table__row:hover {
    background-color: var(--modifiers-normal-color-light-bg-2);
}

/* Asegurar que todas las celdas cambien de color simultáneamente al hacer hover en la fila */
.ubits-data-table__row:hover .ubits-data-table__cell,
.ubits-data-table__row:hover .ubits-data-table__cell--checkbox,
.ubits-data-table__row:hover .ubits-data-table__cell--drag-handle,
.ubits-data-table__row:hover .ubits-data-table__cell--expand,
.ubits-data-table__row:hover .ubits-data-table__controls-column {
    background-color: var(--modifiers-normal-color-light-bg-2) !important;
    transition: background-color 0.2s ease;
}

/* Forzar limpieza del hover cuando la fila tiene la clase de limpieza */
/* Usar mayor especificidad para sobrescribir el hover */
.ubits-data-table__row.ubits-data-table__row--clear-hover,
.ubits-data-table__row.ubits-data-table__row--clear-hover:hover {
    background-color: var(--modifiers-normal-color-light-bg-1) !important;
}

/* Asegurar que todas las celdas también cambien con mayor especificidad */
.ubits-data-table__row.ubits-data-table__row--clear-hover .ubits-data-table__cell,
.ubits-data-table__row.ubits-data-table__row--clear-hover .ubits-data-table__cell--checkbox,
.ubits-data-table__row.ubits-data-table__row--clear-hover .ubits-data-table__cell--drag-handle,
.ubits-data-table__row.ubits-data-table__row--clear-hover .ubits-data-table__cell--expand,
.ubits-data-table__row.ubits-data-table__row--clear-hover .ubits-data-table__controls-column,
.ubits-data-table__row.ubits-data-table__row--clear-hover:hover .ubits-data-table__cell,
.ubits-data-table__row.ubits-data-table__row--clear-hover:hover .ubits-data-table__cell--checkbox,
.ubits-data-table__row.ubits-data-table__row--clear-hover:hover .ubits-data-table__cell--drag-handle,
.ubits-data-table__row.ubits-data-table__row--clear-hover:hover .ubits-data-table__cell--expand,
.ubits-data-table__row.ubits-data-table__row--clear-hover:hover .ubits-data-table__controls-column {
    background-color: var(--modifiers-normal-color-light-bg-1) !important;
}

/* Forzar también con inline style como último recurso - se aplicará desde JS */

/* Celdas */
.ubits-data-table__cell {
    padding: var(--ubits-spacing-sm) var(--ubits-spacing-md);
    padding-left: 10px;
    text-align: left;
    font-size: var(--modifiers-normal-body-sm-regular-fontsize);
    color: var(--modifiers-normal-color-light-fg-1-high);
    font-family: var(--font-family-noto-sans-font-family);
    transition: background-color 0.2s ease;
}

/* Primera celda de datos después de controles (cuando no hay checkbox) - aumentar padding-left */
.ubits-data-table__controls-column + .ubits-data-table__cell {
    padding-left: 32px !important;
}

/* Header de la primera columna después de controles (cuando no hay checkbox) - alinear con las celdas */
.ubits-data-table__controls-column-header + .ubits-data-table__column-header {
    padding-left: 24px !important; /* Ajustado para alinear mejor con las celdas (24px + drag handle 28px = 52px total) */
}

/* Contenido interno del header de la primera columna - alinear con las celdas */
.ubits-data-table__controls-column-header + .ubits-data-table__column-header .ubits-data-table__column-header-content {
    padding-left: 0 !important;
}

/* Título del header de la primera columna - alinear con el texto de las celdas */
.ubits-data-table__controls-column-header + .ubits-data-table__column-header .ubits-data-table__column-title {
    padding-left: 0 !important;
    margin-left: 0 !important;
}

/* Asegurar que el drag handle del header no afecte la alineación del texto */
.ubits-data-table__controls-column-header + .ubits-data-table__column-header .ubits-data-table__column-drag-handle {
    margin-right: 0 !important;
    margin-left: 0 !important;
}

/* Headers de columnas de checkbox - primera columna (checkbox) */
.ubits-data-table__column-header--checkbox[data-column-id="checkbox"] {
    text-align: center;
    padding: 8px var(--ubits-spacing-md, 16px);
    width: 60px;
    min-width: 60px;
    max-width: 60px;
    position: sticky;
    left: 0;
    z-index: 20;
    background-color: var(--modifiers-normal-color-light-bg-1);
    box-sizing: border-box;
    vertical-align: middle !important;
}

/* Wrapper interno para centrar con flex en header */
.ubits-data-table__column-header--checkbox[data-column-id="checkbox"] > * {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 100% !important;
    margin: 0 auto !important;
}

/* Headers de columnas de checkbox - checkbox-2 (solo sticky si está pinned) - optimizado para espacio */
.ubits-data-table__column-header--checkbox[data-column-id="checkbox-2"] {
    text-align: center;
    padding: 8px 4px;
    padding-left: 12px !important;
    width: 48px;
    min-width: 48px;
    max-width: 48px;
    /* NO aplicar position: sticky aquí - solo cuando está pinned */
    background-color: var(--modifiers-normal-color-light-bg-1);
    box-sizing: border-box;
    vertical-align: middle !important;
}

/* Checkbox-2 sticky solo cuando está pinned */
.ubits-data-table__column-header--checkbox[data-column-id="checkbox-2"][data-pinned="true"],
.ubits-data-table__column-header--checkbox[data-column-id="checkbox-2"].ubits-data-table__column-header--pinned {
    position: sticky !important;
    /* left se establece inline desde el código */
    z-index: 10 !important; /* Mismo z-index que otras columnas pinned */
    background-color: var(--modifiers-normal-color-light-bg-1) !important;
}

/* Wrapper interno para centrar con flex en header */
.ubits-data-table__column-header--checkbox[data-column-id="checkbox-2"] > * {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 100% !important;
    margin: 0 auto !important;
}

/* Headers de columnas de checkbox - otras columnas */
.ubits-data-table__column-header--checkbox:not([data-column-id="checkbox"]):not([data-column-id="checkbox-2"]) {
    text-align: center;
    padding: 8px var(--ubits-spacing-md, 16px);
    width: 60px;
    min-width: 60px;
    max-width: 60px;
    position: sticky;
    left: 0;
    z-index: 20;
    background-color: var(--modifiers-normal-color-light-bg-1);
    box-sizing: border-box;
}

.ubits-data-table__column-header--checkbox .ubits-checkbox {
    margin: 0 auto !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 20px !important;
    max-width: 20px !important;
    gap: 0 !important;
}

/* Sobrescribir TODOS los estilos del componente checkbox base en headers */
.ubits-data-table__column-header--checkbox .ubits-checkbox {
    align-items: center !important;
    justify-content: center !important;
}

/* Asegurar que el header también esté centrado verticalmente */
.ubits-data-table__column-header--checkbox {
    vertical-align: middle !important;
}

/* Celdas de checkbox - columna especial (id === 'checkbox') */
.ubits-data-table__cell--checkbox[data-column-id="checkbox"] {
    text-align: center;
    padding: 8px var(--ubits-spacing-md, 16px) !important;
    padding-left: var(--ubits-spacing-md, 16px) !important;
    padding-right: var(--ubits-spacing-md, 16px) !important;
    width: 60px !important;
    min-width: 60px !important;
    max-width: 60px !important;
    box-sizing: border-box;
    position: sticky;
    left: 0;
    z-index: 15;
    background-color: var(--modifiers-normal-color-light-bg-1);
}

/* Columna de checkbox (checkbox-2) - única columna de checkbox fija - optimizado para espacio */
.ubits-data-table__cell--checkbox[data-column-id="checkbox-2"] {
    text-align: center !important;
    padding: 8px 4px !important;
    padding-left: 12px !important;
    padding-right: 4px !important;
    width: 48px !important;
    min-width: 48px !important;
    max-width: 48px !important;
    box-sizing: border-box;
    /* NO aplicar position: sticky aquí - solo cuando está pinned */
    background-color: var(--modifiers-normal-color-light-bg-1);
    vertical-align: middle !important;
    display: table-cell !important;
}

/* Checkbox-2 sticky solo cuando está pinned */
.ubits-data-table__cell--checkbox[data-column-id="checkbox-2"][data-pinned="true"],
.ubits-data-table__cell--checkbox[data-column-id="checkbox-2"].ubits-data-table__cell--pinned {
    position: sticky !important;
    /* left se establece inline desde el código */
    z-index: 12 !important; /* Mismo z-index que otras celdas pinned */
    background-color: var(--modifiers-normal-color-light-bg-1) !important;
}

/* Wrapper interno para centrar con flex */
.ubits-data-table__cell--checkbox[data-column-id="checkbox-2"] > * {
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 100% !important;
    margin: 0 auto !important;
}

/* Otras columnas de checkbox fijas que empiezan con checkbox- (excepto checkbox-2 y checkbox-col) */
/* IMPORTANTE: Solo aplicar a columnas fijas reales, NO a checkbox-col que es de tipo checkbox */
.ubits-data-table__cell--checkbox[data-column-id^="checkbox-"]:not([data-column-id="checkbox-2"]):not([data-column-id="checkbox-col"]) {
    text-align: center;
    padding: 8px var(--ubits-spacing-md, 16px) !important;
    padding-left: var(--ubits-spacing-md, 16px) !important;
    padding-right: var(--ubits-spacing-md, 16px) !important;
    width: 60px !important;
    min-width: 60px !important;
    max-width: 60px !important;
    box-sizing: border-box;
    position: sticky;
    left: 0;
    z-index: 15;
    background-color: var(--modifiers-normal-color-light-bg-1);
}

/* Celdas de checkbox - tipo 'checkbox' (pueden tener label) */
/* IMPORTANTE: Solo aplicar a columnas de tipo checkbox que NO sean columnas fijas */
/* Excluir checkbox, checkbox-2, pero incluir checkbox-col y otros IDs de tipo checkbox */
.ubits-data-table__cell--checkbox:not([data-column-id="checkbox"]):not([data-column-id="checkbox-2"]) {
    text-align: left !important;
    padding: var(--ubits-spacing-sm) var(--ubits-spacing-md) !important;
    padding-left: 10px !important;
    box-sizing: border-box;
}

/* Removido - ahora se maneja en la regla general del hover de la fila */

/* Checkbox en columna especial - sin label - FORZAR CENTRADO */
/* IMPORTANTE: Solo aplicar a columnas fijas (checkbox, checkbox-2), NO a checkbox-col */
.ubits-data-table__cell--checkbox[data-column-id="checkbox"] .ubits-checkbox,
.ubits-data-table__cell--checkbox[data-column-id="checkbox-2"] .ubits-checkbox {
    margin: 0 auto !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    width: 20px !important;
    max-width: 20px !important;
    gap: 0 !important;
}

/* Sobrescribir TODOS los estilos del componente checkbox base */
/* IMPORTANTE: Solo aplicar a columnas fijas (checkbox, checkbox-2), NO a checkbox-col */
.ubits-data-table__cell--checkbox[data-column-id="checkbox"] .ubits-checkbox,
.ubits-data-table__cell--checkbox[data-column-id="checkbox-2"] .ubits-checkbox {
    align-items: center !important;
    justify-content: center !important;
}

/* Asegurar que checkbox-col y otras columnas de tipo checkbox NO se centren */
.ubits-data-table__cell--checkbox:not([data-column-id="checkbox"]):not([data-column-id="checkbox-2"]) .ubits-checkbox {
    align-items: center !important;
    justify-content: flex-start !important;
}

/* Checkbox en columnas de tipo 'checkbox' - pueden tener label */
/* IMPORTANTE: Aplicar a columnas de tipo checkbox que NO sean columnas fijas (checkbox-col, etc.) */
.ubits-data-table__cell--checkbox:not([data-column-id="checkbox"]):not([data-column-id="checkbox-2"]) .ubits-checkbox {
    margin: 0 !important;
    display: flex !important;
    justify-content: flex-start !important;
    align-items: center !important;
    width: auto !important;
    gap: var(--ubits-spacing-xs, 4px) !important;
}

/* Asegurar que el checkbox se mantenga alineado a la izquierda */
.ubits-data-table__cell--checkbox .ubits-checkbox__square {
    flex-shrink: 0;
    width: 20px !important;
    height: 20px !important;
}

/* Para la columna especial de checkbox (id === 'checkbox' o 'checkbox-2'), ocultar el label siempre */
/* IMPORTANTE: Solo aplicar a columnas fijas, NO a checkbox-col */
.ubits-data-table__cell--checkbox[data-column-id="checkbox"] .ubits-checkbox .ubits-checkbox__text-content,
.ubits-data-table__cell--checkbox[data-column-id="checkbox-2"] .ubits-checkbox .ubits-checkbox__text-content {
    display: none;
    flex-direction: column;
    gap: var(--ubits-spacing-none, 0px);
    flex: 0;
    min-width: 0;
    width: 0;
}

/* Para columnas de tipo 'checkbox' (no la columna especial), permitir mostrar el label */
/* IMPORTANTE: Aplicar a columnas de tipo checkbox que NO sean columnas fijas (checkbox-col, etc.) */
.ubits-data-table__cell--checkbox:not([data-column-id="checkbox"]):not([data-column-id="checkbox-2"]) .ubits-checkbox .ubits-checkbox__text-content {
    display: flex !important;
    flex-direction: column !important;
    gap: var(--ubits-spacing-xs, 4px) !important;
    flex: 1 !important;
    min-width: 0 !important;
}

/* Ocultar label solo si está vacío */
.ubits-data-table__cell--checkbox .ubits-checkbox .ubits-checkbox__text-content:has(.ubits-checkbox__label:empty) {
    display: none;
}

.ubits-data-table__cell--checkbox .ubits-checkbox .ubits-checkbox__label:empty {
    display: none;
}

/* Asegurar que la celda editable no cambie el layout del checkbox */
.ubits-data-table__cell--checkbox.ubits-data-table__cell--editable {
    width: 60px;
    min-width: 60px;
    max-width: 60px;
    padding: 8px var(--ubits-spacing-md, 16px);
    text-align: center;
}

/* Celda de nombre */
.ubits-data-table__cell--nombre {
    padding: var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px);
    padding-left: 10px;
    vertical-align: middle;
}

/* Celda de nombre + avatar */
.ubits-data-table__cell--nombre-avatar {
    padding: var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px);
    padding-left: 10px;
    vertical-align: middle;
}

.ubits-data-table__cell--nombre-avatar > div {
    display: flex;
    align-items: center;
    gap: var(--ubits-spacing-sm, 12px);
}

/* Celda de nombre + avatar + texto */
.ubits-data-table__cell--nombre-avatar-texto {
    padding: var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px);
    padding-left: 10px;
    vertical-align: middle;
}

.ubits-data-table__cell--nombre-avatar-texto > div {
    display: flex;
    align-items: flex-start;
    gap: var(--ubits-spacing-sm, 12px);
}

/* Status editable */
.ubits-data-table__status-editable {
    position: relative;
    display: inline-block;
}

.ubits-data-table__status-dropdown {
    position: absolute;
    min-width: 200px;
    max-width: 300px;
    overflow: hidden;
    top: 100%;
    left: 0;
    margin-top: 4px;
    z-index: 1000;
}

/* Status tags en la data table - todos del mismo tamaño XS */
.ubits-data-table__cell .ubits-status-tag {
    min-width: 160px;
    width: 160px;
    display: inline-flex;
    justify-content: center;
    text-align: center;
    box-sizing: border-box;
    /* Forzar tamaño XS usando tokens UBITS */
    padding: var(--ubits-spacing-xs) var(--ubits-spacing-sm) !important;
    font-size: var(--modifiers-normal-body-xs-regular-fontsize) !important;
    line-height: var(--modifiers-normal-body-xs-regular-lineheight) !important;
}

.ubits-data-table__status-editable .ubits-status-tag {
    min-width: 160px;
    width: 160px;
    display: inline-flex;
    justify-content: center;
    text-align: center;
    box-sizing: border-box;
    /* Forzar tamaño XS usando tokens UBITS */
    padding: var(--ubits-spacing-xs) var(--ubits-spacing-sm) !important;
    font-size: var(--modifiers-normal-body-xs-regular-fontsize) !important;
    line-height: var(--modifiers-normal-body-xs-regular-lineheight) !important;
}

/* Asegurar que los iconos también usen el tamaño XS */
.ubits-data-table__cell .ubits-status-tag--xs .ubits-status-tag-left-icon,
.ubits-data-table__cell .ubits-status-tag--xs .ubits-status-tag-right-icon {
    font-size: var(--modifiers-normal-body-xs-regular-fontsize) !important;
}

.ubits-data-table__status-editable .ubits-status-tag--xs .ubits-status-tag-left-icon,
.ubits-data-table__status-editable .ubits-status-tag--xs .ubits-status-tag-right-icon {
    font-size: var(--modifiers-normal-body-xs-regular-fontsize) !important;
}

/* Scrollbar en dropdown de status tags */
.ubits-data-table__status-dropdown:hover .ubits-scrollbar__bar,
.ubits-data-table__status-dropdown:hover .ubits-scrollbar--vertical .ubits-scrollbar__bar {
    opacity: 1 !important;
    pointer-events: auto !important;
}

/* Mostrar scrollbar cuando se hace hover en el contenedor de la lista */
.ubits-data-table__status-dropdown [id*="status-list"]:hover ~ [id*="status-scrollbar"] .ubits-scrollbar__bar,
.ubits-data-table__status-dropdown [id*="status-list"]:hover ~ [id*="status-scrollbar"] .ubits-scrollbar--vertical .ubits-scrollbar__bar {
    opacity: 1 !important;
    pointer-events: auto !important;
}

/* Asegurar que el scrollbar sea visible cuando hay scroll */
.ubits-data-table__status-dropdown .ubits-scrollbar--vertical {
    width: 8px;
    min-width: 8px;
}

.ubits-data-table__status-dropdown .ubits-scrollbar__bar {
    opacity: 0.6 !important;
    pointer-events: auto !important;
}

.ubits-data-table__status-dropdown:hover .ubits-scrollbar__bar {
    opacity: 1 !important;
}

/* Celda editable */
.ubits-data-table__cell--editable {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%23000" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>') 10 10, text;
    position: relative;
}

.ubits-data-table__cell--editable:hover {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%23000" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>') 10 10, text;
    background-color: var(--modifiers-normal-color-light-bg-2);
}

.ubits-data-table__cell--editable[contenteditable="true"]:focus,
.ubits-data-table__cell--editable:has([contenteditable="true"]:focus) {
    background: var(--modifiers-normal-color-light-bg-active), var(--modifiers-normal-color-light-bg-1);
    outline: none;
}

/* Para celdas con avatar, solo hacer editable el texto del nombre */
.ubits-data-table__cell--nombre-avatar.ubits-data-table__cell--editable > div > span {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%23000" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>') 10 10, text;
    min-width: 50px;
    display: inline-block;
    outline: none;
}

.ubits-data-table__cell--nombre-avatar.ubits-data-table__cell--editable:hover > div > span {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%23000" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>') 10 10, text;
}

.ubits-data-table__cell--nombre-avatar.ubits-data-table__cell--editable > div > span[contenteditable="true"]:focus {
    outline: none;
}

.ubits-data-table__cell--nombre-avatar.ubits-data-table__cell--editable:has([contenteditable="true"]:focus) {
    background: var(--modifiers-normal-color-light-bg-active), var(--modifiers-normal-color-light-bg-1);
}


/* Para celdas de nombre solo, también aplicar estilos */
.ubits-data-table__cell--nombre.ubits-data-table__cell--editable > span[contenteditable="true"] {
    outline: none;
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%23000" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>') 10 10, text;
    display: inline-block;
    min-width: 50px;
}

.ubits-data-table__cell--nombre.ubits-data-table__cell--editable > span[contenteditable="true"]:focus {
    outline: none;
}

.ubits-data-table__cell--nombre.ubits-data-table__cell--editable:has([contenteditable="true"]:focus) {
    background: var(--modifiers-normal-color-light-bg-active), var(--modifiers-normal-color-light-bg-1);
}

/* Fecha editable */
.ubits-data-table__date-editable {
    position: relative;
    cursor: pointer;
    display: inline-block;
    width: 100%;
}

.ubits-data-table__date-editable:hover {
    background-color: var(--modifiers-normal-color-light-bg-2);
}

.ubits-data-table__date-display {
    display: inline-block;
    width: 100%;
    min-height: 20px;
}

.ubits-data-table__calendar-container {
    /* Position se establece inline como 'fixed' para evitar problemas con overflow de contenedores padre */
    /* Los valores de top y left se calculan dinámicamente en JavaScript usando getBoundingClientRect */
    z-index: 99999;
    margin: 0;
    /* Asegurar que el contenedor no se corte por overflow de padres */
    contain: none;
}

.ubits-data-table__date-input {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    background: transparent;
    cursor: pointer;
}

.ubits-data-table__cell--fecha.ubits-data-table__cell--editable:has(.ubits-data-table__date-input:focus) {
    background: var(--modifiers-normal-color-light-bg-active), var(--modifiers-normal-color-light-bg-1);
}

/* Celda de progreso */
.ubits-data-table__cell--progreso {
    padding: var(--ubits-spacing-sm, 12px) var(--ubits-spacing-md, 16px);
    padding-left: 10px;
    vertical-align: middle;
}

.ubits-data-table__cell--progreso .ubits-progress-bar {
    width: 100%;
    min-width: 150px;
    max-width: 300px;
}

/* Contenido expandido */
.ubits-data-table__row-expanded-row {
    background-color: var(--modifiers-normal-color-light-bg-1);
}

.ubits-data-table__row-expanded-content {
    padding: var(--ubits-spacing-md);
    border-bottom: 1px solid var(--modifiers-normal-color-light-border-1);
}

/* Contenedor scrollable base */
.ubits-data-table__scrollable-container {
    position: relative;
}

/* Scroll vertical solamente */
.ubits-data-table__scrollable-container--vertical {
    max-height: 400px;
    overflow-y: auto;
    overflow-x: visible; /* Cambiar a visible para que sticky funcione */
}

/* Scroll horizontal solamente */
.ubits-data-table__scrollable-container--horizontal {
    overflow-x: auto !important;
    overflow-y: visible !important; /* Mantener visible para que sticky funcione */
    max-width: 800px !important; /* Ancho máximo fijo para forzar el scroll horizontal */
    width: 100% !important; /* Ocupar todo el ancho disponible hasta el máximo */
    box-sizing: border-box !important;
    display: block !important; /* Asegurar que es un bloque */
    position: relative !important; /* Necesario para sticky */
    /* CRÍTICO: Permitir que el contenedor se expanda más allá de su ancho para que scrollWidth funcione */
    min-width: 0 !important;
    /* Forzar que el contenedor pueda calcular scrollWidth correctamente */
    contain: none !important;
}

/* Asegurar que la tabla se expanda más allá del ancho del contenedor */
.ubits-data-table__scrollable-container--horizontal .ubits-data-table__table {
    min-width: max-content !important;
    width: max-content !important;
    /* Forzar que la tabla tenga su ancho real para que el contenedor pueda calcular scrollWidth correctamente */
    table-layout: auto !important;
    display: table !important;
}

/* CRÍTICO: Cuando hay columnas fijadas, forzar que la tabla sea más ancha que el contenedor */
/* Esto asegura que scrollWidth > clientWidth y permite que sticky funcione */
.ubits-data-table__scrollable-container--horizontal:has(.ubits-data-table__column-header--pinned) .ubits-data-table__table,
.ubits-data-table__scrollable-container--horizontal:has(.ubits-data-table__cell--pinned) .ubits-data-table__table {
    /* Forzar que la tabla tenga al menos 1px más que el contenedor para activar scroll */
    min-width: calc(100% + 1px) !important;
    width: max-content !important;
}

/* Ambos scrolls (vertical y horizontal) */
.ubits-data-table__scrollable-container--vertical.ubits-data-table__scrollable-container--horizontal {
    max-height: 400px;
    max-width: 800px; /* Ancho máximo fijo para forzar el scroll horizontal */
    width: 100%; /* Ocupar todo el ancho disponible hasta el máximo */
    overflow-y: auto;
    overflow-x: auto;
}

/* Ajustar posicionamiento sticky dentro del contenedor scrollable */
/* Estilos para columnas de controladores (drag-handle, expand) - optimizado para espacio */
.ubits-data-table__cell--drag-handle,
.ubits-data-table__cell--expand {
    text-align: center !important;
    vertical-align: middle !important;
    padding: 8px 4px !important;
    width: 32px !important;
    min-width: 32px !important;
    max-width: 32px !important;
    transition: background-color 0.2s ease;
}

.ubits-data-table__column-header--drag-handle,
.ubits-data-table__column-header--expand {
    text-align: center !important;
    vertical-align: middle !important;
    padding: 8px 4px !important;
    width: 32px !important;
    min-width: 32px !important;
    max-width: 32px !important;
}

/* Por defecto, los controladores NO son sticky (se aplicará sticky solo si la columna tiene pinned: true) */
.ubits-data-table__scrollable-container .ubits-data-table__cell--drag-handle,
.ubits-data-table__scrollable-container .ubits-data-table__cell--expand,
.ubits-data-table__scrollable-container .ubits-data-table__column-header--drag-handle,
.ubits-data-table__scrollable-container .ubits-data-table__column-header--expand {
    /* Por defecto: NO sticky (se aplicará inline si pinned: true) */
    z-index: 1 !important;
    background-color: var(--modifiers-normal-color-light-bg-1) !important;
}

/* CRÍTICO: Sobrescribir el background-color en hover con mayor especificidad y !important */
.ubits-data-table__scrollable-container .ubits-data-table__row:hover .ubits-data-table__cell--drag-handle,
.ubits-data-table__scrollable-container .ubits-data-table__row:hover .ubits-data-table__cell--expand,
.ubits-data-table__scrollable-container .ubits-data-table__row:hover .ubits-data-table__cell--checkbox {
    background-color: var(--modifiers-normal-color-light-bg-2) !important;
}

/* CRÍTICO: Sobrescribir el hover del checkbox incluso cuando está pinned */
.ubits-data-table__row:hover .ubits-data-table__cell--checkbox[data-column-id="checkbox-2"],
.ubits-data-table__row:hover .ubits-data-table__cell--checkbox[data-column-id="checkbox-2"][data-pinned="true"],
.ubits-data-table__row:hover .ubits-data-table__cell--checkbox[data-column-id="checkbox-2"].ubits-data-table__cell--pinned {
    background-color: var(--modifiers-normal-color-light-bg-2) !important;
}

/* Por defecto, el checkbox NO es sticky (se aplicará sticky solo si la columna tiene pinned: true) */
.ubits-data-table__scrollable-container .ubits-data-table__cell--checkbox[data-column-id="checkbox-2"],
.ubits-data-table__scrollable-container .ubits-data-table__column-header--checkbox[data-column-id="checkbox-2"] {
    /* Por defecto: NO sticky (se aplicará inline si pinned: true) */
    z-index: 1 !important;
    background-color: var(--modifiers-normal-color-light-bg-1) !important;
}

/* Los controladores serán sticky si tienen pinned: true (se aplica inline) */
/* El CSS solo proporciona estilos base, el sticky se controla mediante pinned en la columna */

/* Estilos del scrollbar nativo - Vertical */
.ubits-data-table__scrollable-container--vertical::-webkit-scrollbar {
    width: 8px;
}

.ubits-data-table__scrollable-container--vertical::-webkit-scrollbar-track {
    background: var(--modifiers-normal-color-light-bg-2);
    border-radius: var(--ubits-border-radius-xs);
}

.ubits-data-table__scrollable-container--vertical::-webkit-scrollbar-thumb {
    background: var(--modifiers-normal-color-light-border-2);
    border-radius: var(--ubits-border-radius-xs);
}

.ubits-data-table__scrollable-container--vertical::-webkit-scrollbar-thumb:hover {
    background: var(--modifiers-normal-color-light-border-1);
}

/* Estilos del scrollbar nativo - Horizontal */
.ubits-data-table__scrollable-container--horizontal::-webkit-scrollbar {
    height: 8px;
}

.ubits-data-table__scrollable-container--horizontal::-webkit-scrollbar-track {
    background: var(--modifiers-normal-color-light-bg-2);
    border-radius: var(--ubits-border-radius-xs);
}

.ubits-data-table__scrollable-container--horizontal::-webkit-scrollbar-thumb {
    background: var(--modifiers-normal-color-light-border-2);
    border-radius: var(--ubits-border-radius-xs);
}

.ubits-data-table__scrollable-container--horizontal::-webkit-scrollbar-thumb:hover {
    background: var(--modifiers-normal-color-light-border-1);
}

/* Estilos del scrollbar nativo - Ambos */
.ubits-data-table__scrollable-container--vertical.ubits-data-table__scrollable-container--horizontal::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

.ubits-data-table__scrollable-container--vertical.ubits-data-table__scrollable-container--horizontal::-webkit-scrollbar-track {
    background: var(--modifiers-normal-color-light-bg-2);
    border-radius: var(--ubits-border-radius-xs);
}

.ubits-data-table__scrollable-container--vertical.ubits-data-table__scrollable-container--horizontal::-webkit-scrollbar-thumb {
    background: var(--modifiers-normal-color-light-border-2);
    border-radius: var(--ubits-border-radius-xs);
}

.ubits-data-table__scrollable-container--vertical.ubits-data-table__scrollable-container--horizontal::-webkit-scrollbar-thumb:hover {
    background: var(--modifiers-normal-color-light-border-1);
}

/* Firefox */
.ubits-data-table__scrollable-container {
    scrollbar-width: thin;
    scrollbar-color: var(--modifiers-normal-color-light-border-2) var(--modifiers-normal-color-light-bg-2);
}

/* Columnas fijadas (pinned) - siempre que estén marcadas como pinned */
/* El left se calcula dinámicamente en el código, pero estos estilos aseguran que sea sticky */
/* IMPORTANTE: Para que sticky funcione, el contenedor padre debe tener overflow-x: auto o scroll */
.ubits-data-table__column-header--pinned {
    position: sticky !important;
    /* left se establece inline desde el código, pero establecer 0 como base para la primera columna */
    left: 0 !important;
    z-index: 13 !important;
    background-color: var(--modifiers-normal-color-light-bg-1) !important;
    /* CRÍTICO: El left específico se aplicará inline y sobrescribirá este valor base */
}

.ubits-data-table__cell--pinned {
    position: sticky !important;
    /* left se establece inline desde el código, pero establecer 0 como base para la primera columna */
    left: 0 !important;
    z-index: 12 !important;
    background-color: var(--modifiers-normal-color-light-bg-1) !important;
    /* CRÍTICO: El left específico se aplicará inline y sobrescribirá este valor base */
}

/* Asegurar que la tabla tenga overflow-x cuando hay columnas fijadas, incluso sin scroll horizontal activo */
/* Esto es necesario para que position: sticky funcione correctamente */
.ubits-data-table:has(.ubits-data-table__column-header--pinned),
.ubits-data-table:has(.ubits-data-table__cell--pinned) {
    overflow-x: auto !important;
}

/* También aplicar al contenedor scrollable si existe */
.ubits-data-table__scrollable-container:has(.ubits-data-table__column-header--pinned),
.ubits-data-table__scrollable-container:has(.ubits-data-table__cell--pinned) {
    overflow-x: auto !important;
}

/* Cuando hay scroll horizontal, aplicar estilos adicionales si es necesario */
.ubits-data-table__scrollable-container--horizontal .ubits-data-table__column-header--pinned,
.ubits-data-table__scrollable-container--vertical.ubits-data-table__scrollable-container--horizontal .ubits-data-table__column-header--pinned {
    /* Los estilos ya están aplicados arriba, pero podemos agregar ajustes específicos aquí si es necesario */
}

.ubits-data-table__scrollable-container--horizontal .ubits-data-table__cell--pinned,
.ubits-data-table__scrollable-container--vertical.ubits-data-table__scrollable-container--horizontal .ubits-data-table__cell--pinned {
    /* Los estilos ya están aplicados arriba, pero podemos agregar ajustes específicos aquí si es necesario */
}

/* Dropdown del menú de columnas */
/* IMPORTANTE: z-index muy alto para que quede por encima de columnas fijadas (z-index: 10-12) */
/* NOTA: Los estilos inline sobrescribirán estos valores base cuando sea necesario */
.ubits-data-table__column-menu-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    z-index: 10000;
    margin-top: 4px;
    display: none;
    width: 160px;
    max-width: 160px;
    box-sizing: border-box;
    /* No agregar estilos aquí, dejar que el componente List los maneje */
}

/* El contenedor del dropdown no debe tener fondo ni sombra, el List lo maneja */
/* IMPORTANTE: Asegurar que el List también tenga z-index alto para quedar por encima de columnas fijadas */
.ubits-data-table__column-menu-dropdown .ubits-list {
    width: 100%;
    max-width: 100%;
    min-width: 0;
    position: relative !important;
    z-index: inherit !important;
    /* El List ya tiene sus propios estilos: background, border-radius, box-shadow */
    margin: 0;
    padding: 0;
}

/* CRÍTICO: NO aplicar position: relative aquí - se aplicará inline cuando sea necesario (sticky para columnas fijadas) */
/* Si se aplica position: relative aquí, sobrescribirá el position: sticky inline */
.ubits-data-table__column-header--pinned {
    /* Forzar que sticky tenga prioridad sobre cualquier position: relative */
    position: sticky !important;
    /* CRÍTICO: left debe estar presente incluso si es 0 para que sticky funcione */
    /* El left específico se aplicará inline, pero necesitamos un valor base */
    /* z-index para asegurar que quede por encima del contenido */
    z-index: 10 !important;
}

/* ========================================
   BUTTON ERROR VARIANT (para botón de eliminar)
   ======================================== */
.ubits-button--error {
  background-color: var(--modifiers-normal-color-light-feedback-bg-error-subtle-default) !important;
  color: var(--modifiers-normal-color-light-feedback-accent-error) !important;
  border-color: var(--modifiers-normal-color-light-feedback-border-error) !important;
}

.ubits-button--error:hover {
  background-color: var(--modifiers-normal-color-light-feedback-accent-error) !important;
  color: var(--modifiers-normal-color-light-fg-bold) !important;
  border-color: var(--modifiers-normal-color-light-feedback-border-error) !important;
}

.ubits-button--error:active,
.ubits-button--error:focus {
  background-color: var(--modifiers-normal-color-light-feedback-accent-error) !important;
  color: var(--modifiers-normal-color-light-fg-bold) !important;
  border-color: var(--modifiers-normal-color-light-feedback-border-error) !important;
}

/* ========================================
   DARK MODE
   ======================================== */

[data-theme="dark"] {
  /* Background colors */
  --modifiers-normal-color-light-bg-1: var(--modifiers-normal-color-dark-bg-1);
  --modifiers-normal-color-light-bg-2: var(--modifiers-normal-color-dark-bg-2);
  --modifiers-normal-color-light-bg-active: var(--modifiers-normal-color-dark-bg-active);
  
  /* Foreground colors */
  --modifiers-normal-color-light-fg-1-high: var(--modifiers-normal-color-dark-fg-1-high);
  --modifiers-normal-color-light-fg-1-medium: var(--modifiers-normal-color-dark-fg-1-medium);
  --modifiers-normal-color-light-fg-bold: var(--modifiers-normal-color-dark-fg-bold);
  
  /* Border colors */
  --modifiers-normal-color-light-border-1: var(--modifiers-normal-color-dark-border-1);
  --modifiers-normal-color-light-border-2: var(--modifiers-normal-color-dark-border-2);
  
  /* Accent colors */
  --modifiers-normal-color-light-accent-brand: var(--modifiers-normal-color-dark-accent-brand);
  
  /* Button colors */
  --modifiers-normal-button-color-light-brand-tertiary-fg: var(--modifiers-normal-button-color-dark-brand-tertiary-fg);
  --modifiers-normal-button-color-light-brand-tertiary-bg-hover: var(--modifiers-normal-button-color-dark-brand-tertiary-bg-hover);
  --modifiers-normal-button-color-light-brand-tertiary-bg-pressed: var(--modifiers-normal-button-color-dark-brand-tertiary-bg-pressed);
  
  /* Feedback colors */
  --modifiers-normal-color-light-feedback-bg-error-subtle-default: var(--modifiers-normal-color-dark-feedback-bg-error-subtle-default);
  --modifiers-normal-color-light-feedback-accent-error: var(--modifiers-normal-color-dark-feedback-accent-error);
  --modifiers-normal-color-light-feedback-border-error: var(--modifiers-normal-color-dark-feedback-border-error);
}

/* Botón error en dark mode - color de fondo específico */
[data-theme="dark"] .ubits-button--error {
  background-color: var(--modifiers-normal-button-color-dark-error-secondary-fg-default) !important;
}

