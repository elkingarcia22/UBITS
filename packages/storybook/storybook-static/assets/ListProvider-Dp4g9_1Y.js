import"./iframe-EN31ESOT.js";function $(b){const{items:m,size:o="md",maxHeight:p="400px",className:r="",attributes:v={}}=b,f=["ubits-list",r].filter(Boolean).join(" "),h=Object.entries(v).map(([e,l])=>`${e}="${l}"`).join(" ");let u=`<div class="${f}" role="list" style="max-height: ${p};" ${h}>`;return m.forEach((e,l)=>{const s=e.value||`list-item-${l}`,n=e.state||(e.selected?"active":"default"),c=["ubits-list-item",`ubits-list-item--${o}`,n!=="default"?`ubits-list-item--${n}`:""].filter(Boolean).join(" "),t=[];e.selected&&t.push('aria-selected="true"'),n==="disabled"?t.push('aria-disabled="true"'):t.push('tabindex="0"'),t.push(`data-value="${s}"`),t.push(`data-index="${l}"`),e.attributes&&Object.entries(e.attributes).forEach(([a,i])=>{t.push(`${a}="${i}"`)}),u+=`
      <div class="${c}" role="listitem" ${t.join(" ")}>
        ${e.label}
      </div>
    `}),u+="</div>",u}function k(b){const{containerId:m,items:o,size:p="md",onSelectionChange:r,multiple:v=!1}=b,f=document.getElementById(m);if(!f)throw new Error(`Container with id "${m}" not found`);const h=$(b);f.innerHTML=h;const u=f.querySelector(".ubits-list");if(!u)throw new Error("Failed to create list element");const e=u.querySelectorAll(".ubits-list-item");let l=null;return e.forEach((s,n)=>{const c=o[n];c&&(c.state!=="disabled"&&s.addEventListener("click",()=>{if(c.onClick&&c.onClick(c,n),v){if(s.classList.contains("ubits-list-item--active")?(s.classList.remove("ubits-list-item--active"),s.removeAttribute("aria-selected")):(s.classList.add("ubits-list-item--active"),s.setAttribute("aria-selected","true")),r){const a=Array.from(e).map((i,d)=>i.classList.contains("ubits-list-item--active")?{item:o[d],index:d}:null).filter(Boolean);if(a.length>0){const i=a[a.length-1];r(i.item,i.index)}else r(null,null)}}else{if(l!==null&&l!==n){const t=e[l];t.classList.remove("ubits-list-item--active"),t.removeAttribute("aria-selected")}l!==n?(s.classList.add("ubits-list-item--active"),s.setAttribute("aria-selected","true"),l=n,r&&r(c,n)):(s.classList.remove("ubits-list-item--active"),s.removeAttribute("aria-selected"),l=null,r&&r(null,null))}}),c.state!=="disabled"&&s.addEventListener("keydown",t=>{const a=n;let i=null;if(t.key==="ArrowDown")t.preventDefault(),i=a<o.length-1?a+1:0;else if(t.key==="ArrowUp")t.preventDefault(),i=a>0?a-1:o.length-1;else if(t.key==="Enter"||t.key===" "){t.preventDefault(),s.click();return}else t.key==="Home"?(t.preventDefault(),i=0):t.key==="End"&&(t.preventDefault(),i=o.length-1);if(i!==null){const d=e[i];d&&o[i]?.state!=="disabled"&&(d.focus(),d.scrollIntoView({block:"nearest",behavior:"smooth"}))}}))}),u}export{k as c,$ as r};
