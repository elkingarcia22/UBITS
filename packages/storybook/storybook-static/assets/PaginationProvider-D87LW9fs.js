import{r as C}from"./ButtonProvider-CX_wJeLD.js";import{c as w}from"./ListProvider-Dp4g9_1Y.js";import"./iframe-EN31ESOT.js";function z(h,l,t){const c=[];if(l<=t)for(let u=1;u<=l;u++)c.push(u);else{const u=Math.floor(t/2);let e=Math.max(1,h-u),b=Math.min(l,e+t-1);b-e<t-1&&(e=Math.max(1,b-t+1));for(let _=e;_<=b;_++)c.push(_)}return c}function A(h,l,t="md",c){return C({variant:l?"secondary":"tertiary",size:t==="sm"?"sm":t==="lg"?"lg":"md",text:String(h),active:l,className:"ubits-pagination__page-button"})}function N(h){const{currentPage:l=1,totalPages:t,totalItems:c,itemsPerPage:u,variant:e="default",size:b="md",maxVisiblePages:_=7,showFirst:a=!0,showLast:g=!0,showPrevNext:s=!0,showInfo:d=!1,showItemsPerPage:$=!1,itemsPerPageOptions:n=[10,20,50,100],className:p="",attributes:o={},labels:L={}}=h,r=Math.max(1,Math.min(l,t)),v=["ubits-pagination",`ubits-pagination--${e}`,`ubits-pagination--${b}`,p].filter(Boolean).join(" "),S=[...Object.entries(o).map(([m,P])=>`${m}="${P}"`)].filter(Boolean).join(" "),i={first:"Primera",last:"Última",previous:"Anterior",next:"Siguiente",page:"Página",of:"de",items:"items",itemsPerPage:"Por página",...L};let x="";if(d&&c!==void 0){const m=(r-1)*(u||10)+1,P=Math.min(r*(u||10),c);x=`
      <div class="ubits-pagination__info">
        <span class="ubits-body-sm">${m}-${P} ${i.of} ${c} ${i.items}</span>
      </div>
    `}let I="";if($){const m=`ubits-pagination-items-per-page-${Date.now()}`,P=`ubits-pagination-list-${Date.now()}`,E=u||n[0];n.map(M=>({label:String(M),value:String(M),state:"default",selected:M===E})),I=`
      <div class="ubits-pagination__items-per-page">
        <label class="ubits-body-sm">${i.itemsPerPage}:</label>
        <div class="ubits-pagination__select-wrapper" style="position: relative; display: inline-block;">
          <button 
            type="button" 
            class="ubits-pagination__select-button ubits-body-sm" 
            id="${m}"
            data-list-id="${P}"
            aria-haspopup="listbox"
            aria-expanded="false"
          >
            ${E}
            <i class="fas fa-chevron-down" style="margin-left: var(--ubits-spacing-xs); font-size: var(--modifiers-normal-body-xs-regular-fontsize);"></i>
          </button>
          <div id="${P}" class="ubits-pagination__list-container" style="display: none;"></div>
        </div>
      </div>
    `}const y=b==="sm"?"sm":b==="lg"?"lg":"md",f=[];if(a&&e==="default"&&f.push(C({variant:"tertiary",size:y,icon:"angle-double-left",iconStyle:"solid",iconOnly:!0,disabled:r===1,className:"ubits-pagination__nav-button",attributes:{"aria-label":i.first,title:i.first}})),s&&f.push(C({variant:"tertiary",size:y,icon:"chevron-left",iconStyle:"solid",iconOnly:!0,disabled:r===1,className:"ubits-pagination__nav-button",attributes:{"aria-label":i.previous,title:i.previous}})),e==="default"){const m=z(r,t,_);m[0]>1&&f.push('<span class="ubits-pagination__ellipsis">...</span>'),m.forEach(P=>{f.push(A(P,P===r,b))}),m[m.length-1]<t&&f.push('<span class="ubits-pagination__ellipsis">...</span>')}else e==="compact"&&f.push(`
      <span class="ubits-pagination__page-info ubits-body-md">
        ${i.page} ${r} ${i.of} ${t}
      </span>
    `);return s&&f.push(C({variant:"tertiary",size:y,icon:"chevron-right",iconStyle:"solid",iconOnly:!0,disabled:r===t,className:"ubits-pagination__nav-button",attributes:{"aria-label":i.next,title:i.next}})),g&&e==="default"&&f.push(C({variant:"tertiary",size:y,icon:"angle-double-right",iconStyle:"solid",iconOnly:!0,disabled:r===t,className:"ubits-pagination__nav-button",attributes:{"aria-label":i.last,title:i.last}})),`
    <div class="${v}" ${S} data-current-page="${r}" data-total-pages="${t}">
      ${x}
      ${I}
      <div class="ubits-pagination__controls">
        ${f.join("")}
      </div>
    </div>
  `}function q(h){const{containerId:l,...t}=h;if(!l)return console.error("❌ [Pagination] containerId es requerido para createPagination"),null;const c=document.getElementById(l);if(!c)return console.error(`❌ [Pagination] Contenedor con ID "${l}" no encontrado`),null;const u=N(t);c.innerHTML=u;const e=c.querySelector(".ubits-pagination");if(!e)return console.error("❌ [Pagination] No se pudo crear el elemento de paginación"),null;e.querySelectorAll(".ubits-pagination__page-button").forEach(s=>{s.addEventListener("click",()=>{const d=parseInt(s.textContent||"1");t.onPageChange&&t.onPageChange(d)})}),e.querySelectorAll(".ubits-pagination__nav-button").forEach(s=>{s.addEventListener("click",()=>{const d=parseInt(e.getAttribute("data-current-page")||"1"),$=parseInt(e.getAttribute("data-total-pages")||"1"),n=s.getAttribute("aria-label")||"";let p=d;n.includes("Primera")||n.includes("First")?p=1:n.includes("Última")||n.includes("Last")?p=$:n.includes("Anterior")||n.includes("Previous")?p=Math.max(1,d-1):(n.includes("Siguiente")||n.includes("Next"))&&(p=Math.min($,d+1)),p!==d&&t.onPageChange&&t.onPageChange(p)})});const a=e.querySelector(".ubits-pagination__select-button"),g=e.querySelector(".ubits-pagination__list-container");if(a&&g){const s=a.getAttribute("data-list-id")||`ubits-pagination-list-${Date.now()}`,d=t.itemsPerPage||t.itemsPerPageOptions?.[0]||10;g.id=s;const $=(t.itemsPerPageOptions||[10,20,50,100]).map(o=>({label:String(o),value:String(o),state:"default",selected:o===d}));let n=!1;const p=()=>{if(n){g.style.display="none",a.setAttribute("aria-expanded","false"),n=!1;return}g.innerHTML="";const o=t.size||"md",L=o==="sm"?"sm":o==="lg"?"lg":"md",r=document.getElementById(s);if(!r){console.error("❌ [Pagination] Container not found:",s),console.error("❌ [Pagination] Buscando en todo el documento...");const v=document.querySelectorAll('[id*="pagination"]');console.error("❌ [Pagination] Contenedores encontrados:",Array.from(v).map(S=>({id:S.id,tagName:S.tagName,className:S.className})));return}try{const v=w({containerId:s,items:$,size:L,maxHeight:"none",onSelectionChange:(i,x)=>{if(i&&t.itemsPerPageOptions&&t.itemsPerPageOptions[x]!==void 0){const I=t.itemsPerPageOptions[x],y=a.querySelector("i");y?a.innerHTML=`${I} ${y.outerHTML}`:a.textContent=String(I),g.style.display="none",a.setAttribute("aria-expanded","false"),n=!1,t.onItemsPerPageChange?t.onItemsPerPageChange(I):console.warn("⚠️ [Pagination] onItemsPerPageChange no está definido")}else console.warn("⚠️ [Pagination] selectedItem o itemsPerPageOptions no válidos")}}),S=r.querySelector(".ubits-list");g.style.display="block",a.setAttribute("aria-expanded","true"),n=!0}catch(v){console.error("❌ [Pagination] Error creating items per page list:",v),console.error("❌ [Pagination] Error stack:",v instanceof Error?v.stack:"N/A")}};a.addEventListener("click",o=>{o.stopPropagation(),p()}),document.addEventListener("click",o=>{n&&!g.contains(o.target)&&!a.contains(o.target)&&(g.style.display="none",a.setAttribute("aria-expanded","false"),n=!1)})}else console.error("❌ [Pagination] Select button or list container not found"),console.error("❌ [Pagination] selectButton:",a),console.error("❌ [Pagination] listContainer:",g),console.error("❌ [Pagination] paginationElement HTML:",e.innerHTML.substring(0,500));return e}export{q as c,N as r};
