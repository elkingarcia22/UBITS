import{r as L}from"./ButtonProvider-CX_wJeLD.js";import{r as S}from"./InputProvider-schPVK84.js";function B(){return`
    <button
      type="button"
      class="ubits-search-button__clear"
      aria-label="Limpiar bÃºsqueda"
      tabindex="0"
    >
      <i class="far fa-times ubits-search-button__clear-icon" aria-hidden="true"></i>
    </button>
  `}function C(n){const{active:h=!1,size:d="md",state:l="default",disabled:i=!1,placeholder:E="",value:b="",width:m=248,className:e=""}=n,a=i||l==="disabled",s=h||l==="active",p=b&&b.trim().length>0?B():"";if(s){const o=["ubits-search-button","ubits-search-button--active",`ubits-search-button--${d}`,a?"ubits-search-button--disabled":"",e].filter(Boolean).join(" "),r=m?`width: ${m}px;`:"",u=S({type:"text",size:d,placeholder:E,value:b,showLabel:!1,showHelper:!1,className:"ubits-search-button__input",state:a?"disabled":"default"});let t=u;const c=u.match(/^<div[^>]*style="[^"]*position:\s*relative[^"]*"[^>]*>(.*?)<\/div>$/s);return c&&c[1]&&(t=c[1].trim(),t=t.replace(/padding-left:\s*\d+px;/g,"padding-left: 0;")),t=t.replace(/(<input[^>]*class="[^"]*ubits-search-button__input[^"]*"[^>]*)(>)/,'$1 aria-label="Buscar"$2'),`
      <div class="${o}" style="${r}">
        <div class="ubits-search-button__input-wrapper">
          ${t}
          ${p}
        </div>
      </div>
    `.trim()}const v=[l==="hover"?"ubits-search-button--force-hover":"",e].filter(Boolean).join(" ");return L({variant:"secondary",size:d,icon:"magnifying-glass",iconOnly:!0,disabled:a,className:v,attributes:{"aria-label":"Buscar"}})}function $(n){const h=n.containerId?document.getElementById(n.containerId):document.body;if(!h)throw new Error(`Container with id "${n.containerId}" not found`);const d=C(n),l=document.createElement("div");l.innerHTML=d.trim();const i=l.firstElementChild;if(!i)throw new Error("Failed to create search button element");if(h.appendChild(i),n.active||n.state==="active"){const e=i.querySelector(".ubits-search-button__input"),a=i.querySelector(".ubits-search-button__clear");e&&(n.onChange&&(e.addEventListener("input",n.onChange),e.addEventListener("change",n.onChange)),n.onFocus&&e.addEventListener("focus",n.onFocus),n.onBlur&&e.addEventListener("blur",n.onBlur)),a&&a.addEventListener("click",function(s){if(s.preventDefault(),s.stopPropagation(),e&&(e.value="",e.focus(),n.onChange)){const f=new Event("input",{bubbles:!0});e.dispatchEvent(f)}})}else{const e=i;e&&n.onClick&&e.addEventListener("click",n.onClick)}return{element:i,destroy:()=>{i.parentNode&&i.parentNode.removeChild(i)},update:e=>{const a={...n,...e},s=a.active||a.state==="active",f=n.active||n.state==="active";if(s&&f){const r=i.querySelector(".ubits-search-button__input");if(i.querySelector(".ubits-search-button__clear"),r&&e.value!==void 0&&e.value!==r.value){const c=r.selectionStart||0;r.value=e.value||"",r.setSelectionRange(c,c);return}if(r&&e.placeholder!==void 0&&(r.placeholder=e.placeholder||""),r&&e.disabled!==void 0&&(r.disabled=e.disabled||!1),!["active","state","size","width","className"].some(c=>e[c]!==void 0&&e[c]!==n[c]))return}const p=C(a),v=document.createElement("div");v.innerHTML=p.trim();const o=v.firstElementChild;if(o&&i.parentNode){let r=!1,u=0;if(s&&f){const t=i.querySelector(".ubits-search-button__input");t&&t===document.activeElement&&(r=!0,u=t.selectionStart||0)}if(i.parentNode.replaceChild(o,i),s){const t=o.querySelector(".ubits-search-button__input"),c=o.querySelector(".ubits-search-button__clear");t&&(r&&(t.focus(),t.setSelectionRange(u,u)),a.onChange&&(t.addEventListener("input",a.onChange),t.addEventListener("change",a.onChange)),a.onFocus&&t.addEventListener("focus",a.onFocus),a.onBlur&&t.addEventListener("blur",a.onBlur)),c&&c.addEventListener("click",function(g){if(g.preventDefault(),g.stopPropagation(),t&&(t.value="",t.focus(),a.onChange)){const _=new Event("input",{bubbles:!0});t.dispatchEvent(_)}})}else{const t=o;t&&a.onClick&&t.addEventListener("click",a.onClick)}}}}}export{$ as c,C as r};
